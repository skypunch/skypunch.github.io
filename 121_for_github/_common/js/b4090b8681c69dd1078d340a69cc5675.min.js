/** @license
 * Activity Builder Copyright (C) 2013-2016 Infuze Ltd <enq@infuze.co.uk>, All Rights Reserved.
 */
require.config({shim:{velocity:["jquery"]},waitSeconds:30}),function(o,n,l){var dn="/",Mt="jquery",Wt="activity",us="modernizr",Ks="velocity",oa="velocity-ui",xe="common",ra="_const",aa="api",ei="fill_the_gaps",sa=ei+dn+ei,ia="_draggable";define("api",[Mt,Wt],function(r,s){function g(){}function C(t,e,i,s){try{if(t.apply(i,s)===!1)return!1}catch(t){n.console.error("Exception in API("+e+"): ",t,t.stack)}}function h(t,e){p=p||{},p[t]=e}var u,v,p,b=[],y=s.abcAlwaysModules=s.abcAlwaysModules||{},m=s.abcModulesIndex=s.abcModulesIndex||{},_=s.abcModulesGlobal=s.abcModulesGlobal||{},c=s.abcModules={_data:{}};return s.API=g,g.pause=function(t){t===!0?s._paused=t:(s._paused=!1,s[J]())},g.addModule=n.addModule=function(n,a){if(c[n]=a,a.always&&(y[n]=a),s.api_started){var i,e,r={};for(i=0;s.count>i;i++)r["#activity_"+(i+1)]=s[i][t](["_path"],i);for(v=n,s.api(Li,r),i=0;s.count>i;i++)if(e=s[i],e[oe]=null,e._loaded){if(s.api(pt,e.baseId,e.doNotMark?{}:e.persistData),!s.loaded)continue;s.CurrentActivity===e.index&&s.api(ni,e.baseId),e.doNotMark||s.api(ie,e.baseId,e.persistData),s.started&&s.CurrentActivity===e.index&&s.api(me,e.baseId,null),s.api(Oe,e.baseId),s.api(ge,e.baseId)}v=null}},g.useModule=n.useModule=function(t,l,n){if(!c[t]&&s.commonPath){var a=f+e+t+e+Yi;if(!s.parent.children(Zt+"[src*='"+a+"']").length){var i=o.createElement("script");i.type=gt+Ci+Xi+Zt,i.src=s.commonPath+a,s.parent[0].appendChild(i)}}m[t]=m[t]||[],r.currentHandler[x]=r.currentHandler[x]||{},r.currentHandler[x][t]={data:l,index:m[t].length},delete r.currentHandler[oe],m[t].push(r.currentHandler.baseId),r.isPlainObject(n)&&(c._data[t]=c._data[t]||{},r.extend(!0,c._data[t],n,{name:t}))},s.api=function(o,S,f){if(S&&!(b.indexOf(o)>-1)){var h,l,w,a,t,n,d=[],M=r.currentHandler,i=s[S],g=i instanceof s;g?(r.currentHandler=i,f=[].slice.call(arguments,2),n=i[oe],n||(n=i[oe]=r.extend({},y,i[x]))):(i={},f=[].slice.call(arguments,1),n=s.abcModules),b.push(o);for(t in n)n.hasOwnProperty(t)&&r.isPlainObject(c[t])&&c[t][o]&&(!v||v===t)&&d.push(t);for(d.sort(function(t,e){return(c[t].nice||0)-(c[e].nice||0)}),h=0;d.length>h;h++){if(t=d[h],!a){if(a={},g)for(l in p)p.hasOwnProperty(l)&&(a[l]=p[l].bind(i));a.readonly=!!s._readonly,a.ext=e+Y,a.setreadonly=function(t){!s._readonly&&t&&(s._readonly=u.readonly=a.readonly=!0)},g&&"load"===o&&(a.removeModule=function(){var e,i,n=this[x][t].index;for(e=0;s.count>e;e++)i=s[e],i[x][t]&&i[x][t].index>n&&i[x][t].index--;delete this[x][t]}.bind(i))}u=r.extend(!0,[],m[t],c._data[t],a,{id:i.baseId,uuid:i.data&&i.data._uuid,global_uuid:s.uuid,type:i.type,_type:i._type,module:t,active:s.handler===i,running:s.loaded}),n[t].hasOwnProperty(di)&&(u.index=n[t].index),n[t].hasOwnProperty(ls)?u.data=n[t].data:_[t]&&(u.data=_[t]),C(c[t][o],t+e+o,u,f)===!1&&(w=!1)}return b.pop(),r.currentHandler=M,w}},h(en,function(t){r.isNumber(t)&&(t="#activity_"+t);for(var e=0;s.count>e;e++)if(s[e].baseId===t)return s[S](e),!0;return!1}),h(ge,function(){this&&this===s.handler&&s[M]()}),h(rs,function(i,e,n){return this&&JSON.parse(JSON.stringify(this[t](i,e===l?null:e,n)))}),h(ie,function(t){return this&&JSON.parse(JSON.stringify(this[a](t)))}),h(de,function(t,e){return this&&this.timer(t,e)}),h(W,function(t,e,i){return this&&this[Te](t,e,i)}),h(be+"_"+$,function(t){return this?this.countLeft(t):0}),h(be+"_"+Jn,function(t){return this?this.countTotal(t):1}),h(be+"_"+X,function(t){return this?this.countLeft(t):0}),h(ke,function(t,e){if(this)if(r.isBoolean(t))this[w]([i,"disableSubmit"],!t),r.isBoolean(e)&&this[w]([i,"hideSubmit"],e),this.initList();else{var n=this._btnSubmit;this._btnSubmit=!0,this.onSubmit(t),this._btnSubmit=n}}),h(pe,function(t,e){if(this)if(r.isBoolean(t))this[w]([i,"disableReset"],!t),r.isBoolean(e)&&this[w]([i,"hideReset"],e),this.initList();else{var n=this._btnReset;this._btnReset=!0,this.onReset(t),this._btnReset=n}}),h(fe,function(t,e){if(this)if(r.isBoolean(t))this[w]([i,"disableReveal"],!t),r.isBoolean(e)&&this[w]([i,"hideReveal"],e),this.initList();else{var n=this._btnReveal;this._btnReveal=!0,this.onReveal(t),this._btnReveal=n}}),h(ve,function(t,e){if(this)if(r.isBoolean(t))this[w]([i,"disableFirst"],!t),r.isBoolean(e)&&this[w]([i,"hideFirst"],e),this.initList();else{var n=this._btnFirst;this._btnFirst=!0,this.onFirst(t),this._btnFirst=n}}),h($,function(t,e){if(this)if(r.isBoolean(t))this[w]([i,"disableLeft"],!t),r.isBoolean(e)&&this[w]([i,"hideLeft"],e),this.initList();else{var n=this._btnLeft;this._btnLeft=!0,this.onLeft(t),this._btnLeft=n}}),h(X,function(t,e){if(this)if(r.isBoolean(t))this[w]([i,"disableRight"],!t),r.isBoolean(e)&&this[w]([i,"hideRight"],e),this.initList();else{var n=this._btnRight;this._btnRight=!0,this.onRight(t),this._btnRight=n}}),h(Qs,function(t){return this&&this[d](t)}),h(ti,function(t,e,i,n){return this&&this.dialog(t,e,i,n)}),g}),define("common",[Mt,us,Ks,oa],function(i){function r(t,e,n){t[e]||(t[e]=n,(Object.defineProperty||i.noop)(t,e,{enumerable:!1}))}function _(x,p,y,b,v,m,g,f){var s,a,n,h,t,e,u=arguments;for(s=0;u.length>s;s++)if(t=u[s],s||!i.isBoolean(t)&&t)if(e){if(t)if(i.isPlainObject(t))e.css(t);else if(i.isArray(t))t.length&&e[t[0]].apply(e,t.slice(1));else if(i.isString(t))if("#"===t[0])e.attr("id",t.replace("#",""));else if("<"===t[0])e.append(t);else if("="===t[0])e.html(t.substr(1));else{var d=t.indexOf(":"),r=t.indexOf("=");if(d>=0&&(0>r||r>d))for(n=t.regex(/\s*([a-z-]+):(\s*(?:url\([^\)]*\)|[^;]+)+)\s*;?/gi),a=0;n.length>a;a++)e.css(n[a][0],n[a][1]);else r>0?(n=t.regex(/(.*?)=(.*)/),h="?"===t[0],e[h?"data":"attr"](h?n[0].substr(1):n[0],n[1]===l?!0:n[1])):t.length&&e.addClass(t)}else t.jquery&&e.append(t)}else e=i(!i.isString(t)||(/[ #<.]/.test(t)?t:o.createElement(t)));else if(!t)break;return e=e||i(),e.length&&i.currentHandler&&!i.currentHandler._loaded&&i.currentHandler.context&&e.is(F)&&!e[0].complete&&(i.currentHandler[se](),e.on(pt+c+Is,function(t){this.off(),t[J]()}.bind(e,i.currentHandler))),e}function A(t){var e=parseInt(t%60),i=parseInt(t/60);return i+":"+(e>9?"":"0")+e}var a=i.fn,h=Array.prototype,L=Date.prototype,S=Function.prototype,M=Number.prototype,g=Object.prototype,v=String.prototype;!function(){try{var s,t,e=n.console=n.console||{},a=S.bind,r=["log","warn","error","debug","info","assert","trace"];for(s=0;r.length>s;s++)t=r[s],e[t]=e[t]||i.noop,a&&"object"==typeof e[t]&&(e[t]=a.call(e[t],e))}catch(t){}}();var T=Modernizr.prefixed("requestAnimationFrame",n),x={},w=!1;i.rAF=function(t,s){var e;i.isString(t)?(e=s,s?(x[t]=s,w?e=!1:(w=!0,e=function(){var e;w=!1;for(t in x)x.hasOwnProperty(t)&&(e=x[t],e&&(x[t]=!1,e()))})):x[t]=!1):e=t,e&&(T&&!o.hidden?T(e):n.setTimeout(e,16))},i.log=function(t){var e=n.console;return t&&e&&e.log&&e.log(t),t},i.explode=function(n){var t,e=[];if(n&&i.isArray(n)&&(e=n.slice(0)),i.isString(n))for(e=n.split("."),t=0;e.length-1>t;t++)"\\"===e[t].substr(-1)&&(e[t]=e[t].substr(0,e[t].length-1)+"."+e.splice(t+1,1),t--);for(t=0;e.length>t;t++)/[^\d]/.test(e[t])||(e[t]=parseInt(e[t],10));return e},i.False=function(){return!1},i.True=function(){return!0},i.extend(i.support,{mobile:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)}),i.stylesheet=function(e,n,s){var t,a,r,o=function(i,t,e){n[t]=e};if(i.stylesheet.globalStylesheet||(i.stylesheet.globalStylesheet=i('<style style="text/css"/>').appendTo("head"),i.stylesheet.rules={}),i.stylesheet.globalStylesheet)if(n){if(i.isString(n)&&(n.indexOf("{")>=0&&(n=n.replace(/(^[^{]*\{|\}.*)/g,"")),n=n.split(";")),i.isArray(n))for(a=n,n={},t=0;a.length>t;t++)i.isString(a[t])&&a[t].replace(/^\s*([^\s:]+)\s*:\s*(.*?)\s*$/,o);for(e=i.isArray(e)?e:e.split(","),s=i.isString(s)?s+" ":"",t=0;e.length>t;t++)e[t]=s+e[t].trim();for(t=0;e.length>t;t++)r=e[t],i.stylesheet.rules[r]=i.extend(i.stylesheet.rules[r]||{},n);i.rAF("style",i.stylesheet.update)}else if(i.isString(e)&&/\{.*?\}/.test(e))for(e=e.regex(/\s*(.*?)\s*\{([^\}]*)\}/g),t=0;e.length>t;t++)i.stylesheet(e[t][0],e[t][1],s);else if(i.isPlainObject(e))for(t in e)e.hasOwnProperty(t)&&i.stylesheet(t,e[t],s);return this},i.stylesheet.update=function(){if(i.stylesheet.globalStylesheet){var t,a,e,n,r=i.stylesheet.rules,s="";for(e in r)if(r.hasOwnProperty(e)){s+=e+"{",n=r[e];for(t in n)n.hasOwnProperty(t)&&(a=i.camelCase(t),s+=("float"!==t&&i.cssProps.hasOwnProperty(a)?i.cssProps[a].replace(/([A-Z])/g,"-$1").toLowerCase():t)+":"+n[t]+";");s+="}"}i.stylesheet.globalStylesheet.text(s)}},i.stylesheet.empty=function(){return i.stylesheet.globalStylesheet&&(i.stylesheet.rules={},i.stylesheet.globalStylesheet.text("")),this},a.onFontLoaded=function(t,e){return i.isFunction(t)?this.each(function(r,s){var i=_(u,"ui-font-loader","font-family:sans-serif",[gt,"giItT1WQy@!-/#"]).appendTo(s);n.setTimeout(a.onFontLoaded.check.bind(i,0,i.width(),i.height(),t),a.onFontLoaded.defaults.delay),i.css(ot,e||"inherit")}):this},a.onFontLoaded.check=function(t,e,i,s){e!==this.width()||i!==this.height()||t>=a.onFontLoaded.defaults.maximum?(this.remove(),s()):n.setTimeout(a.onFontLoaded.check.bind(this,t+1,e,i,s),a.onFontLoaded.defaults.delay)},a.onFontLoaded.defaults={delay:50,maximum:40},a.fixNatural=function(){return this.each(function(e,i){if(this.naturalWidth===l){var t=new Image;t.src=this.src,this.naturalWidth=t.width,this.naturalHeight=t.height}})},a.naturalWidth=function(){return this.length?this[0].naturalWidth||this.fixNatural()[0].naturalWidth:null},a.naturalHeight=function(){return this.length?this[0].naturalHeight||this.fixNatural()[0].naturalHeight:null},a.slideTo=function(e,t){var n=!e||e===ee,s=n?null:i(e);return n||s.length?this.each(function(){var e=i(this),a=e.offset();n||s.is(e.parent())||e.appendTo(s),e.velocity("stop",!0),0===t||i.isPlainObject(t)&&0===t.duration?e.css({top:0,left:0}):e.offset(a).velocity({top:0,left:0},t)}):this},a.findTextSize=function(v){var l,e,r,h,c,u,d,f,p,m=this.length,n=i.extend({},a.findTextSize.defaults,v),y=n.maxWidth||0,g=n.maxHeight||0,s=n.maxSize||200,o=n.minSize||50,t=s,x=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+1};if(o!==s)for(l=0;m>l;l++){for(e=this.get(l),r=x(2*Math.ceil(s-o)),h=i.isString(n.useParent)?i(e).closest(n.useParent):i(n.useParent?e.parentNode:e),d=Math.ceil(y||h.width()),f=Math.ceil(g||h.height()),c=i(e).style({overflow:b,maxWidth:d+qt,maxHeight:re,width:Lt,height:Lt,fontSize:"1px"}),p=c.find(":css("+Ui+"="+tn+")").filter(":visible").not(e).style({display:re}),u=o;r>.1;)if(r/=2,t=Math.min(s,t+r),e.style.fontSize=t+"%",d>=e.scrollWidth&&f>=e.scrollHeight){if(t===s)break;u=t}else{if(!(t>o))break;t=u}s=t,c.style(),p.style()}return t},a.findTextSize.defaults={useParent:!0,maxWidth:0,maxHeight:0,minSize:50,maxSize:200},a.autoTextSize=function(t){return this.css("font-size",this.findTextSize(t)+"%")},a.wrapGroup=function(n){for(var e,t=i(this);t.length;)e=t.first(),e.nextAll().each(function(i){return t.eq(i+1).is(this)?(e.push(this),l):!1}),t=t.not(e.wrapAll(n));return this},a.textSpace=function(){var t="";return i(this).find("*").contents().each(function(){3===this.nodeType&&(t+=(t?" ":"")+this.textContent)}),t},i.prefix=function(t){return t.indexOf("-")>=0&&(t=t.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})),i.cssProps[t]||(i.cssProps[t]=Modernizr.prefixed(t)),i.cssProps[t]},a.style=function(s){var t,a,r,n,e,o="savedStyles";for(n=0;this.length>n;n++)if(r=this.get(n).style,e=this[o+n],i.isArray(s))for(e||(e=this[o+n]={}),t=0;s.length>t;t++)a=i.prefix(s[t]),e[a]=r[a];else if(i.isPlainObject(s)){e||(e=this[o+n]={});for(t in s)s.hasOwnProperty(t)&&(a=i.prefix(t),e[a]=r[a],r[a]=s[t])}else if(e){for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);delete this[o+n]}return this},a.verticalCenter=function(e){var n=i.isString(e),t=[];return this.each(function(r,a){var e=i(a),s=((n?i(s,a).height():s||e.parent().height())-e.height())/2,o=parseFloat(e.css("font-size"));t[r]=Math.max(0,s/o)}).each(function(e,n){i(n).css("padding-top",t[e]+"em")}),this},a.getRect=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}}},a.min=function(e,n){var t=Number.MAX_VALUE;return this.each(function(s,n){t=Math.min(t,parseFloat(i(n).css(e)))}),(t===Number.MAX_VALUE?n:t)||0},a.max=function(e,n){var t=Number.MIN_VALUE;return this.each(function(s,n){t=Math.max(t,parseFloat(i(n).css(e)))}),(t===Number.MIN_VALUE?n:t)||0},a.rxRemoveClass=function(i){var t,e;for(t=0;this.length>t;t++)e=this.eq(t),e.removeClass((e.attr("class")||"").regex(i));return this},a.drawLine=function(e,l){var n=function(e,t,i,s,a,r,n){return e+(n?t/4:0)>i+s?a:i>e+(n?t/4*3:t)?r:"center"},s=function(r,o,e,s,a){var t=r.getBoundingClientRect(),i=o.getBoundingClientRect();t.height=t.height||t.bottom-t.top,t.width=t.width||t.right-t.left,e=e.split(" "),e[1]=e[1]||e[0],"auto"===e[0]&&(i.width=i.width||i.right-i.left,e[0]=n(t.left,t.width,i.left,i.width,"left","right",s)),"auto"===e[1]&&(i.height=i.height||i.bottom-i.top,e[1]=n(t.top,t.height,i.top,i.height,"top","bottom",s)),s||-1!==e.indexOf("center")||(e[t.height>t.width?0:1]="center");var l={left:("left"===e[0]?t.left:"right"===e[0]?t.right:t.width/2+t.left)-a.left,top:("top"===e[1]?t.top:"bottom"===e[1]?t.bottom:t.height/2+t.top)-a.top};return l},r=function(i){var t=i.data(O+"-options"),a=i.offsetParent()[0].getBoundingClientRect(),e=s(t.parent,t.target,t.from,t.corners,a),n=s(t.target,t.parent,t.to,t.corners,a);i.css({top:e.top-parseFloat(i.css("padding-top"))+"px",left:e.left-parseFloat(i.css("padding-left"))+"px",width:Math.sqrt(Math.pow(e.left-n.left,2)+Math.pow(e.top-n.top,2))+"px",transform:"rotate("+Math.atan2(n.top-e.top,n.left-e.left)+"rad)"})};if("destroy"===e)return this.each(function(s,e){var t=i(e),n=t.data(O+"-options");n||t.data(O)&&(t.data(O).remove(),t.removeData([O]))});if(!e||e===Pe)return this.each(function(s,e){var t=i(e),n=t.data(O+"-options");n?r(t):t.data(O)&&t.data(O).drawLine(Pe)});if(e.length){var o=i(e),t=i.extend({},a.drawLine.options,l);return this.each(function(a,h){var a,n,c,s,l=i(h),u=t.source?i(t.source,l)[0]:h,e=l.data(O)||i();for(t.replace&&(e.remove(),e=i()),u||(u=h),a=0;o.length>a;a++){for(c=o[a],n=0;e.length>n&&(s=e.eq(n),s.data(O+"-options").target!==c);n++);n===e.length&&(s=i('<hr class="ui-helper-reset ui-line">').data(O+"-options",{target:c,from:t.from,parent:u,to:t.to,corners:t.corners}).appendTo(l),e.push(s[0]),l.data(O,e)),r(s)}})}return this},a.drawLine.options={source:null,corners:!0,from:"center",to:"center",replace:!0},a.insertAt=function(e,s){var n,t=i(s);for(e>0&&(t=t.children().eq(e-1)),n=this.length-1;n>=0;n--)0>=e?t.prepend(this):t.after(this);return this},a.modal=function(n,t){return t=t===!0?400:t,this.each(function(h,o){var a=!0,r=i(o),s=r.data(we);n===l?a=s===l:i.isBoolean(n)&&(a=n),a&&!s?(s=_(u,ye+c+"ui-widget-overlay",t?"ui-widget-slow":null,t?un+":0":null),r.before(s).addClass(ye).data(we,s),i(ut+f+ui+e+zt).addClass(p),t&&s.velocity("fadeIn",t)):!a&&s&&(t=t||s.hasClass("ui-widget-slow"),r.removeClass(ye).removeData(we),i(ut+f+ui+e+zt).removeClass(p),t?s.velocity("fadeOut",t,function(){i(this).remove()}):s.remove())})},a.hoverable=function(t){return this.hover(function(){i(this).addClass(t||yi)},function(){i(this).removeClass(t||yi)})},a.family=function(){var e,t,n=i();for(e=0;this.length>e;e++)for(t=this[e];t!==o;t=t.parentNode)n.push(t);return n},a.common=function(t){if(t&&this.is(t))return this;var e,n=(t?this:this.eq(0)).family(),s=t?i(t):this.slice(1);for(e=0;s.length>e;e++)n=n.has(s.eq(e).family());return n},a.commonFirst=function(t){return this.common(t).first()},a.maxHeight=function(){var t,e=0;for(t=0;this.length>t;t++)e=Math.max(e,this.eq(t).height());return e},a.maxWidth=function(){var t,e=0;for(t=0;this.length>t;t++)e=Math.max(e,this.eq(t).width());return e},a.shuffle=function(t){return t===!1?this:[].shuffle.call(i(this))},a.imageLoad=function(t,e){return this.each(function(){var n=i(this),s=this.complete;s&&t.call(this,n),(!s||e)&&n[e?"on":"one"](pt,t.bind(this,n))})},function(){function h(t,e,i){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?i/100:1)]}function s(t,e){return parseInt(i.css(t,e),10)||0}function g(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:i.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}i.ui=i.ui||{};var r,e=Math.max,t=Math.abs,o=Math.round,u=/left|center|right/,d=/top|center|bottom/,f=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,c=/%$/,m=a.position;i.position={scrollbarWidth:function(){if(r!==l)return r;var n,e,t=i("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=t.children()[0];return i("body").append(t),n=s.offsetWidth,t.css("overflow","scroll"),e=s.offsetWidth,n===e&&(e=t[0].clientWidth),t.remove(),r=n-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),s="scroll"===e||"auto"===e&&t.element[0].scrollWidth>t.width,a="scroll"===n||"auto"===n&&t.element[0].scrollHeight>t.height;return{width:a?i.position.scrollbarWidth():0,height:s?i.position.scrollbarWidth():0}},getWithinInfo:function(s){var t=i(s||n),e=i.isWindow(t[0]),a=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:e,isDocument:a,offset:t.offset()||{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:e?t.width():t.outerWidth(),height:e?t.height():t.outerHeight()}}},a.position=function(n){if(!n||!n.of)return m.apply(this,arguments);n=i.extend({},n);var v,a,r,c,l,y,x=i(n.of),w=i.position.getWithinInfo(n.within),S=i.position.getScrollInfo(w),b=(n.collision||"fit").split(" "),_={};return y=g(x),x[0].preventDefault&&(n.at="left top"),a=y.width,r=y.height,c=y.offset,l=i.extend({},c),i.each(["my","at"],function(){var e,i,t=(n[this]||"").split(" ");1===t.length&&(t=u.test(t[0])?t.concat(["center"]):d.test(t[0])?["center"].concat(t):["center","center"]),t[0]=u.test(t[0])?t[0]:"center",t[1]=d.test(t[1])?t[1]:"center",e=f.exec(t[0]),i=f.exec(t[1]),_[this]=[e?e[0]:0,i?i[0]:0],n[this]=[p.exec(t[0])[0],p.exec(t[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===n.at[0]?l.left+=a:"center"===n.at[0]&&(l.left+=a/2),"bottom"===n.at[1]?l.top+=r:"center"===n.at[1]&&(l.top+=r/2),v=h(_.at,a,r),l.left+=v[0],l.top+=v[1],this.each(function(){var C,m,d=i(this),f=d.outerWidth(),p=d.outerHeight(),M=s(this,"marginLeft"),y=s(this,"marginTop"),T=f+M+s(this,"marginRight")+S.width,$=p+y+s(this,"marginBottom")+S.height,u=i.extend({},l),g=h(_.my,d.outerWidth(),d.outerHeight());"right"===n.my[0]?u.left-=f:"center"===n.my[0]&&(u.left-=f/2),"bottom"===n.my[1]?u.top-=p:"center"===n.my[1]&&(u.top-=p/2),u.left+=g[0],u.top+=g[1],i.support.offsetFractions||(u.left=o(u.left),u.top=o(u.top)),C={marginLeft:M,marginTop:y},i.each(["left","top"],function(t,e){i.ui.position[b[t]]&&i.ui.position[b[t]][e](u,{targetWidth:a,targetHeight:r,elemWidth:f,elemHeight:p,collisionPosition:C,collisionWidth:T,collisionHeight:$,offset:[v[0]+g[0],v[1]+g[1]],my:n.my,at:n.at,within:w,elem:d})}),n.using&&(m=function(g){var i=c.left-u.left,l=i+a-f,s=c.top-u.top,h=s+r-p,o={target:{element:x,left:c.left,top:c.top,width:a,height:r},element:{element:d,left:u.left,top:u.top,width:f,height:p},horizontal:0>l?"left":i>0?"right":"center",vertical:0>h?"top":s>0?"bottom":"middle"};f>a&&t(i+l)<a&&(o.horizontal="center"),p>r&&t(s+h)<r&&(o.vertical="middle"),o.important=e(t(i),t(l))>e(t(s),t(h))?"horizontal":"vertical",n.using.call(this,g,o)}),d.offset(i.extend(u,{using:m}))})},i.ui.position={fit:{left:function(t,n){var h,r=n.within,s=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,l=t.left-n.collisionPosition.marginLeft,i=s-l,a=l+n.collisionWidth-o-s;n.collisionWidth>o?i>0&&0>=a?(h=t.left+i+n.collisionWidth-o-s,t.left+=i-h):t.left=a>0&&0>=i?s:i>a?s+o-n.collisionWidth:s:i>0?t.left+=i:a>0?t.left-=a:t.left=e(t.left-l,t.left)},top:function(t,i){var h,o=i.within,s=o.isWindow?o.scrollTop:o.offset.top,r=i.within.height,l=t.top-i.collisionPosition.marginTop,n=s-l,a=l+i.collisionHeight-r-s;i.collisionHeight>r?n>0&&0>=a?(h=t.top+n+i.collisionHeight-r-s,t.top+=n-h):t.top=a>0&&0>=n?s:n>a?s+r-i.collisionHeight:s:n>0?t.top+=n:a>0?t.top-=a:t.top=e(t.top-l,t.top)}}}}();return i.makeObject=function(n,s){var t,i={},e=[].slice.call(arguments);for(t=0;e.length>t;t++)i[e[t++]]=e[t];return i},i.isString=function(t){return"string"==typeof t},i.isNumber=function(t){return"number"==typeof t},i.isBoolean=function(t){return"boolean"==typeof t},a.play=function(){return this.each(function(){try{this.play()}catch(t){}})},a.pause=function(){return this.each(function(){try{this.pause()}catch(t){}})},a.audio=function(){return i(this).each(function(){var t=i(this),n=t[0];t.data(N)||(n.load?n.load():safariComplain(),t.data(N,!0).on(ct,function(){i(U+y+ze).not(this).pause(),i(qs).each(function(){try{i(this.contentDocument).find(U+y+ze).pause()}catch(t){}}),i(this).closest(e+N).removeClass(Ct).addClass(ct)}).on(Ct,function(){i(this).closest(e+N).removeClass(ct).addClass(Ct)}).on(Fs+e+N,function(){var t=i(this);t.closest(e+N).removeClass(ct+c+Ct),this.currentTime=0,this.pause(),t.siblings(Si).find("path").attr("d","M0 0")}).on(As+e+N,function(){var s=i(this),a=this.currentTime,l=this.duration,t=a/l,n=Math.range(0,360*t,359),r=n*Math.PI/180,h=153*Math.sin(r),c=-153*Math.cos(r),u=n>180?1:0,o=s.closest(e+qe).children(e+zi);t=100*t+Et,o.children(m).css($,t).text(A(a)),o.children(Yt).css(P,t),s.siblings(Si).find("path").attr("d","M 0 0"+(n>0?" v -153 A 153 153 1 "+u+" 1 "+h+" "+c+" z":""))}))}),this},a.loading=i.loading=function(r,o){var a=!0,t="ui-loading",s=i(this&&this!==i?this:"body"),e=s.data(t+"-element");return r===l?a=e===l:i.isBoolean(r)&&(a=r),a&&!e?s.data(t+"-element",e=_("div",t)).data(t+"-timeout",n.setTimeout(function(){e.appendTo(s).modal(!0)},o||100)):!a&&e&&(n.clearTimeout(s.data(t+"-timeout")),e.modal(!1).remove(),s.removeData([t+"-element",t+"-timeout"])),this},i.expr[":"].abc=function(e,s,n){if(!n[3])return i.hasData(e);var t=n[3].split("=");return 1===t.length?i(e).data(t[0])!==l:i(e).data(t[0])==t[1]},i.expr[":"].css=function(s,a,n){var t,e=i(s);return n[3]?(t=n[3].split("="),1===t.length?e.css(t[0])!==e.parent().css(t[0]):e.css(t[0])==t[1]):e.attr("style")},i.expr[":"].focusable=function(t){var e=t.nodeName.toLowerCase(),n=i.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(e)||i.attr(t,Ut)?!t.disabled:"a"===e||"area"===e?t.href||!isNaN(n):!isNaN(n))&&i(t)["area"===e?"parents":"closest"](":visible").length},r(S,"bind",function(e,t){t=[].slice.call(arguments),e=t.shift();var i=this,n=function(){var n=e;return i.apply(n,t.concat([].slice.call(arguments,t.length)).slice(0))};return n.bind=function(){return S.bind.apply(i,[].slice.call(arguments))},n}),r(v,"regex",function(i){var e,n,t=this.match(i);if(t){for(i.global?/(^|[^\\]|[^\\](\\\\)*)\([^?]/.test(i.source)&&(n=RegExp(i.source,(i.ignoreCase?"i":"")+(i.multiline?"m":""))):t.shift(),e=t.length;e--;)t[e]&&(n?t[e]=t[e].regex(n):t[e].search(/^[\-+]?\d*\.?\d+(?:e[\-+]?\d+)?$/i)>=0&&(t[e]=parseFloat(t[e])));if(!n&&1===t.length)return t[0]}return t}),r(v,"regexIndexOf",function(i,e){var t=this.substring(e||0).search(i);return t>=0?t+(e||0):t}),r(v,"unicode",function(){return this.replace(/[\u0100-\uffff]/g,function(t){return"\\u"+("0000"+t.charCodeAt().toString(16)).slice(-4)})}),r(h,"shuffle",function(){for(var i,e,t=this.length;--t>0;)e=Math.floor(Math.random()*(t+1)),i=this[e],this[e]=this[t],this[t]=i;return this}),r(h,"wrap",function(i,t,e){return i=i===l?"":i,t=t===l?"":t,e=e===l?"":e,t+this.join(e+i+t)+e}),r(h,"grow",function(t,s){var i=0,n=Math.abs(t),e=[].slice.call(arguments,1);if(n>this.length)for(e=e.length?e:[0];n>this.length;)i>=e.length&&(i=0),this.push(e[i++]);else t>0&&this.length>t&&this.splice(t,this.length-t);return this}),r(h,"dup",function(t){return t?JSON.parse(JSON.stringify(this)):this.slice(0)}),r(h,"unique",function(){for(var t=this.length;t-->0;)t>this.indexOf(this[t])&&this.splice(t,1);return this}),r(h,"indexOfCase",function(i,e){var t,n=this.length>>>0;for(e=e||0,i=i.toUpperCase(),t=Math.max(e>=0?e:n-Math.abs(e),0);n>t;t++)if(t in this&&this[t].toUpperCase()===i)return t;return-1}),r(h,"pushOnce",function(i){for(var t=0,e=arguments;e.length>t;t++)-1===this.indexOf(e[t])&&this.push(e[t])}),r(h,"remove",function(e){var t=this.indexOf(e);t>=0&&this.splice(t,1)}),r(h,"removeCase",function(e){var t=this.indexOfCase(e);t>=0&&this.splice(t,1)}),r(h,"clean",function(){for(var t=0,e=[];this.length>t;t++)(this[t]||0===this[t]||this[t]===!1)&&e.push(this[t]);return e}),r(h,"natcasesort",function(){return this.sort(function(o,r){o=(o+"").toLowerCase(),r=(r+"").toLowerCase();var t,e,n,s,i,h,a,c,u=o.length,d=r.length,l=function(e){var t=e.charCodeAt(0);return t>=48&&57>=t};for(n=s=0;u>n&&d>s;n++,s++){if(t=o.charAt(n),e=r.charAt(s),l(t)&&l(e)){for(i=h=0;l(t);t=o.charAt(++n))h++,i=10*i+parseInt(t,10);for(a=c=0;l(e);e=r.charAt(++s))c++,a=10*a+parseInt(e,10);t=i===a?h:i,e=i===a?c:a,n--,s--}if(e>t)return-1;if(t>e)return 1}return u===d?0:u>d?1:-1})}),r(g,"count",function(){var t,e=0;for(t in this)this.hasOwnProperty(t)&&e++;return e}),r(g,"setTree",function(t,s){var e=function(t,a,r,s){var n=a[s];if(a.length-1>s){if(i.isString(t[n])&&i.isNumber(a[s+1])?t[n]=[t[n]]:i.isPlainObject(t[n])||i.isArray(t[n])||(t[n]=i.isNumber(a[s+1])?[]:{}),!e(t[n],a,r,s+1)&&s>=1&&i.isEmptyObject(t[n]))return delete t[n],!1}else if(r!==t[n]){if(r===l){if(delete t[n],i.isArray(t))for(;t.length&&t[t.length-1]===l||null===t[t.length-1];)t.pop();return!1}t[n]=r}return!0};if(i.isPlainObject(t))for(var n in t)t.hasOwnProperty(n)&&e(this,i.explode(n),t[n],0);else e(this,i.explode(t),s,0);return this}),r(g,"getTree",function(n,s){for(var t=this,e=i.explode(n);e.length&&t!==l;)t=t[e.shift()];return t===l||null===t?s:t}),r(g,"hasTree",function(n){for(var t=this,e=i.explode(n);e.length&&t!==l;)t=t[e.shift()];return!(t===l||null===t)}),r(g,"indexOfX",function(e){var t;for(t in this)if(this.hasOwnProperty(t)&&this[t]===e)return t;return null}),r(g,"dup",function(){return JSON.parse(JSON.stringify(this))}),r(g,"clear",function(){for(var t in this)this.hasOwnProperty(t)&&delete this[t];return this}),r(g,"bestMatch",function(n){var i,t,e=-1;for(i in this)t=parseInt(i),this.hasOwnProperty(i)&&t>e&&n>=t&&(e=t);return e>-1?this[e]:l}),r(g,"equals",function(e){var t;for(t in this)if(this.hasOwnProperty(t)){if(!e.hasOwnProperty(t)||typeof this[t]!=typeof e[t]||!this[t]!=!e[t])return!1;switch(typeof this[t]){case"object":if(null!==this[t]&&null!==e[t]&&(""+this[t].constructor!=""+e[t].constructor||!this[t].equals(e[t])))return!1;break;case"function":if(""+this[t]!=""+e[t])return!1;break;default:if(this[t]!==e[t])return!1}}for(t in e)if(!this.hasOwnProperty(t))return!1;return!0}),r(v,"ucfirst",function(){return this.charAt(0).toUpperCase()+this.slice(1)}),r(v,"text",function(){return this.replace(/<\/?(img|li|ul|ol|span|div)[^>]*>/gi,"")}),r(v,"reverse",function(){return this.split("").reverse().join("")}),r(v,"fromBBCode",function(){var n,a,e=this,r={"":/^\s+|\s+$/g," &nbsp;":/\s{2}/gi,"&bull;&nbsp;":/\[\*\]/gi,'<span class="abc-icon">$1</span>':/\[icon\s?([\s\S]*?)\]/gi,"<br />":/\s*\[br\]/gi,"<b>$1</b>":/\[b\]([\s\S]*?)\[\/b\]/gi,"<i>$1</i>":/\[i\]([\s\S]*?)\[\/i\]/gi,"<u>$1</u>":/\[u\]([\s\S]*?)\[\/u\]/gi,"<s>$1</s>":/\[s\]([\s\S]*?)\[\/s\]/gi,'<span class="abc-custom-$1">$2</span>':/\[style\s?([^\]]+)\]([\s\S]*?)\[\/style\s?\1\]/gi,'<span class="$1">$2</span>':/\[span\s([^\]]+)\]([\s\S]*?)\[\/span\]/gi,"<span>$1</span>":/\[span\]([\s\S]*?)\[\/span\]/gi,'<div class="$1">$2</div>':/\[div\s([^\]]+)\]([\s\S]*?)\[\/div\]/gi,"<div>$1</div>":/\[div\]([\s\S]*?)\[\/div\]/gi,'<dfn data-title="$1">$2</dfn>':/\[define ([^\]]*)\]([\s\S]*?)\[\/define\]/gi,'<div style="text-align:left;">$1</div>':/\[left\]([\s\S]*?)\[\/left\]/gi,'<div style="text-align:center;">$1</div>':/\[center\]([\s\S]*?)\[\/center\]/gi,'<div style="text-align:right;">$1</div>':/\[right\]([\s\S]*?)\[\/right\]/gi,"<sub>$1</sub>":/\[sub\]([\s\S]*?)\[\/sub\]/gi,"<sup>$1</sup>":/\[sup\]([\s\S]*?)\[\/sup\]/gi,'<a href="$1">$2</a>':/\[url=([^\]]+)\]([\s\S]*?)\[\/url\]/gi,'<a href="$1">$1</a>':/\[url\]([\s\S]*?)\[\/url\]/gi,'<span style="color:$1;">$2</span>':/\[color[= ](.*?)\]([\s\S]*?)\[\/color\]/gi,'<span style="background-color:$1;">$2</span>':/\[bg[= ](.*?)\]([\s\S]*?)\[\/bg\]/gi,'<span style="font-size:200%;">$1</span>':/\[xx-large\]([\s\S]*?)\[\/xx-large\]/gi,'<span style="font-size:150%;">$1</span>':/\[x-large\]([\s\S]*?)\[\/x-large\]/gi,'<span style="font-size:120%;">$1</span>':/\[large\]([\s\S]*?)\[\/large\]/gi,'<span style="font-size:88%;">$1</span>':/\[small\]([\s\S]*?)\[\/small\]/gi,'<span style="font-size:75%;">$1</span>':/\[x-small\]([\s\S]*?)\[\/x-small\]/gi,'<span style="font-size:60%;">$1</span>':/\[xx-small\]([\s\S]*?)\[\/xx-small\]/gi,'<span class="codeStyle">$1</span>':/\[code\]([\s\S]*?)\[\/code\]/gi,'<span class="quoteStyle">$1</span>':/\[quote.*?\]([\s\S]*?)\[\/quote\]/gi};for(n in r)if(r.hasOwnProperty(n))for(a=-1;a!==e;e=e.replace(r[n],n))a=e;return e=e.replace(/\[table\]([\s\S]*?)\[\/table\]/gi,function(e,t){return"<table><tr>"+t.replace(/(^|\[tr\])(?!\[th|\[td)/gi,"$1[td]").replace(/\[(th|td)\s+(\d)+\]([\s\S]*?)(?=\[th|\[td|\[tr|$)/gi,'<$1 colspan="$2">$3</$1>').replace(/\[(th|td)\]([\s\S]*?)(?=\[th|\[td|\[tr|$)/gi,"<$1>$2</$1>").replace(/\[tr\]/gi,"</tr><tr>")+"</tr></table>"}).replace(/\[img\](.*?)\[\/img\]/gi,function(e,t){return'<img src="'+i.currentHandler[d](t)+'" />'}).replace(/\[img\s+(\S*?)\]/gi,function(e,t){return'<img src="'+i.currentHandler[d](/[^0-9]/.test(t)?t:"image_"+t)+'" />'}).replace(/\[audio\s+(wide\s+)?(\S*?)\]/gi,function(r,e,t){var n=/[^0-9]/.test(t)?t:"sound_"+t,s=i.currentHandler[d](n+".mp3")||i.currentHandler[d]("default.mp3"),a=i.currentHandler[d](n+".ogg")||i.currentHandler[d]("default.ogg");return'<span class="abc-audio-wrapper"><span class="abc-audio-button"><span class="abc-icon abc-audio">'+(e?"":'<svg viewBox="0 0 300 300"><path class="progress" transform="translate(150, 150)" d="M0 0"/></svg>')+'<audio preload="auto"><source src="'+s+'" type="audio/mpeg"/><source src="'+a+'" type="audio/ogg"/></audio></span></span>'+(e?'<span class="abc-audio-control"><hr/><span></span></span>':"")+"</span>"}).replace(/\[activitycount(!?)\]/gi,function(a,e){var n=i.currentHandler[k]([s,"pageNumber"],i.currentHandler.navigationTitle)||(i.currentHandler[t]([s,"letters"])?String.fromCharCode(97+i.currentHandler.countLeft(!1,!0)):i.currentHandler.countLeft(!0)+1+(e?"/":'</span>/<span class="abc-activity-total">')+i.currentHandler.countTotal(!0));return(e?"":'<span class="abc-activity-index">')+n+(e?"":"</span>")}).replace(/\[activity(!?)\]/gi,function(a,e){var n=i.currentHandler[k]([s,"pageNumber"],i.currentHandler.navigationTitle)||(i.currentHandler[t]([s,"letters"])?String.fromCharCode(97+i.currentHandler.countLeft(!1,!0)):i.currentHandler.countLeft(!0)+1);return(e?"":'<span class="abc-activity-index">')+n+(e?"":"</span>")}).replace(/\[activities(!?)\]/gi,function(e,t){return(t?"":'<span class="abc-activity-total">')+i.currentHandler.countTotal(!0)+(t?"":"</span>")}).replace(/\[(li|ol)\]([\s\S]*?)(<br \/>|<\/td>|$)/gi,function(s,t,n,e){var i="ol"===t?"ol":"ul";return"<"+i+' class="abc-list"><li>'+n.replace(RegExp("\\["+t+"\\]","gi"),"</li><li>")+("<br />"===e?"":e)+"</li></"+i+">"}).replace(/<\/ul><ul class="abc-list">/gi,"").replace(/<\/ol><ol class="abc-list">/gi,"")}),r(v,"toBBCode",function(){var t,e=this.trim(),i={"":/<\/?p>/gi,"[url=$1]$2[/url]":/<a [^>]*?href=\"([^\"]*?)\".*?>(.*?)<\/a>/gi,"[color=$1]$2[/color]":/<span [^>]*?style=\"color:\s?([^\";]+).*?\".*?>(.*?)<\/span>/gi,"[bg=$1]$2[/bg]":/<span [^>]*?style=\"background-color:\s?([^\";]+).*?\".*?>(.*?)<\/span>/gi,"[img]$1[/img]":/<img [^>]*?src=\"([^\"]*?)\".*?\/>/gi,"[img $1]":/<img [^>]*?src=\".*\/([^\/\"]*?)\.(gif|png|svg)\".*?\/>/gi,
"[code]$1[/code]":/<span [^>]*?class=\"codeStyle\".*?>(.*?)<\/span>/gi,"[quote]$1[/quote]":/<blockquote.*?>(.*?)<\/blockquote>/gi,"[xx-small]$1[/xx-small]":/<span [^>]*?style=\"font-size:\s?60%;?\".*?>(.*?)<\/span>/gi,"[x-small]$1[/x-small]":/<span [^>]*?style=\"font-size:\s?75%;?\".*?>(.*?)<\/span>/gi,"[small]$1[/small]":/<span [^>]*?style=\"font-size:\s?88%;?\".*?>(.*?)<\/span>/gi,$1:/<span [^>]*?style=\"font-size:\s?100%;?\".*?>(.*?)<\/span>/gi,"[large]$1[/large]":/<span [^>]*?style=\"font-size:\s?120%;?\".*?>(.*?)<\/span>/gi,"[x-large]$1[/x-large]":/<span [^>]*?style=\"font-size:\s?150%;?\".*?>(.*?)<\/span>/gi,"[xx-large]$1[/xx-large]":/<span [^>]*?style=\"font-size:\s?200%;?\".*?>(.*?)<\/span>/gi,"[$1]$2[/$1]":/<(sub|sup)>(.*?)<\/\1>/gi,"[b]$2[/b]":/<(strong|b)>(.*?)<\/\1>/gi,"[i]$2[/i]":/<(em|i)>(.*?)<\/\1>/gi,"[u]$2[/u]":/<(u|span [^>]*?style=\"text-decoration:\s?underline;?\").*?>(.*?)<\/\1>/gi,"[activitycount]":/<span class="abc-activity-index">\d+<\/span>\/<span class="abc-activity-total">\d+<\/span>/gi,"[activity]":/<span class="abc-activity-index">\d+<\/span>/gi,"[activities]":/<span class="abc-activity-total">\d+<\/span>/gi,"[br]":/(\s*<br ?\/?>|\s*\n)/gi,'"':/&quot;/gi,"<":/&lt;/gi,">":/&gt;/gi,"&":/&amp;/gi," ":/&nbsp;|\u00a0/gi};for(t in i)i.hasOwnProperty(t)&&(e=e.replace(i[t],t));return e=e.replace(/<ul[^>]*>(.*?)<\/ul>/gi,function(e,t){return t.replace(/<li[^>]*>(.*?)<\/li>/gi,"[li]$1")+"[br]"}).replace(/<ol[^>]*>(.*?)<\/ol>/gi,function(e,t){return t.replace(/<li[^>]*>(.*?)<\/li>/gi,"[ol]$1")+"[br]"}).replace(/(\[br\]+)$/gi,"").replace(/<([a-z]+)>( |)<\/\1>/gi,"$2").replace(/<\/([a-z]+)>( |)<\1>/gi,"$2")}),r(Math,"range",function(t,e,i){return Math.max(t,Math.min(e,i))}),r(M,"range",function(t,e){return this>=Math.min(t,e)&&this<=Math.max(t,e)}),r(M,"addCommas",function(e){var t=i.isNumber(e)?this.toFixed(e):this,n=/^(.*\s)?(\d+)(\d{3}\b)/;for(t=""+t;n.test(t);)t=t.replace(n,"$1$2,$3");return t}),r(JSON,"shallow",function(e,i,n,s){var t=function(e,s){var i,n;if(e&&"object"==typeof e)if(Array.isArray(e))if(s>0)for(n=[],i=0;e.length>i;i++)n[i]=t(e[i],s-1);else n="[object Array]";else if(s>0){n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],s-1))}else n="[object Object]";else n=e;return n};return JSON.stringify(t(e,i||1),n,s)}),r(Date,"now",function(){return(new Date).getTime()}),r(Date,"format",function(t){return(new Date).format(t)}),r(L,"format",function(l){if(isNaN(this))return"Invalid Date";var t=this,i=t.getDate(),n=t.getDay(),r=t.getMonth(),o=t.getFullYear(),s=t.getHours(),g=t.getMinutes(),p=t.getSeconds(),v=t.getMilliseconds(),d=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=function(t){return 9>=t?"0"+t:""+t},c=!1,f=[],a=function(t,e){return t+" "+e+(1===t?"":"s")},m=function(f){if(c)return c=!1,f;switch(f){case"\\":return c=!0,"";case"d":return e(i);case"D":return u[n].substr(0,3);case"j":return i;case"l":return u[n];case"N":return n+1;case"S":return i%10===1&&11!==i?"st":i%10===2&&12!==i?"nd":i%10===3&&13!==i?"rd":"th";case"w":return n;case"R":var l=(new Date-t)/1e3;return 0>l?"In the Future":20>l?"Just Now":60>l?"Less than a Minute Ago":120>l?"About a Minute Ago":3600>l?a(Math.floor(l/60),"Minute")+" Ago":7200>l?"About an Hour Ago":43200>l?a(Math.floor(l/3600),"Hour")+" Ago":172800>l&&n===(new Date).getDay()?"Today":259200>l&&(6===n?0:n+1)===(new Date).getDay()?"Yesterday":604800>l?a(Math.floor(l/86400),"Day")+" Ago":2678400>l?a(Math.floor(l/604800),"Week")+" Ago":31536e3>l?a(Math.floor(l/2678400),"Month")+" Ago":a(Math.floor(l/31536e3),"Year")+" Ago";case"F":return d[r];case"m":return e(r+1);case"M":return d[r].substr(0,3);case"n":return r+1;case"L":return o%4===0&&o%100!==0||o%400===0?"1":"0";case"Y":return o;case"y":return(""+o).substr(2);case"a":return 12>s?"am":"pm";case"A":return 12>s?"AM":"PM";case"g":return s%12||12;case"G":return s;case"h":return e(s%12||12);case"H":return e(s);case"i":return e(g);case"s":return e(p);case"u":return v.substr(0,3);case"O":var h=t.getTimezoneOffset();return(0>h?"+":"-")+e(Math.abs(h/60))+"00";case"P":var h=t.getTimezoneOffset();return(0>h?"+":"-")+e(Math.abs(h/60))+":"+e(Math.abs(h%60));case"T":var m;return t.setMonth(0),m=t.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),t.setMonth(r),m;case"Z":return 60*-t.getTimezoneOffset();case"c":return t.format("Y-m-d\\TH:i:sP");case"r":return""+t;case"U":return t.getTime()/1e3;default:return f}};l=l||"c";for(var h=0;l.length>h;h++)f.push(m(l[h]));return f.join("")}),r(n,"atob",function(t){var o,c,h,l,r,s,a,n="",e=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");t.length>e;)l=i.indexOf(t.charAt(e++)),r=i.indexOf(t.charAt(e++)),s=i.indexOf(t.charAt(e++)),a=i.indexOf(t.charAt(e++)),o=l<<2|r>>4,c=(15&r)<<4|s>>2,h=(3&s)<<6|a,n+=String.fromCharCode(o),64!==s&&(n+=String.fromCharCode(c)),64!==a&&(n+=String.fromCharCode(h));return n}),r(n,"btoa",function(t){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var i,e,r=base64.PADCHAR,n=base64.ALPHA,a=base64.getbyte,s=[];t=""+t;var o=t.length-t.length%3;if(0===t.length)return t;for(i=0;o>i;i+=3)e=a(t,i)<<16|a(t,i+1)<<8|a(t,i+2),s.push(n.charAt(e>>18)),s.push(n.charAt(e>>12&63)),s.push(n.charAt(e>>6&63)),s.push(n.charAt(63&e));switch(t.length-o){case 1:e=a(t,i)<<16,s.push(n.charAt(e>>18)+n.charAt(e>>12&63)+r+r);break;case 2:e=a(t,i)<<16|a(t,i+1)<<8,s.push(n.charAt(e>>18)+n.charAt(e>>12&63)+n.charAt(e>>6&63)+r)}return s.join("")}),a.convertCSS=function(s,o){if(s===l||""===s)return 0;var t=parseFloat(s);switch(s.replace(/[^a-z%]/g,"").substr(0,4)){case re:t=0;break;case Os:var e,a,r=s.replace(/^calc\(|\)$/g,"").split(" ");for(t=this.convertCSS(r.shift(),o);r.length;)e?(a=this.convertCSS(r.shift(),o),"+"===e?t+=a:"-"===e?t-=a:"*"===e?t*=a:"/"===e&&(t/=a),e=""):e=r.shift();break;case C:t*=parseFloat(this.css(xt));break;case Et:t*=this.parent()[o?P:R]()/100;break;case Ls:t*=parseFloat(i(Se).css(xt));break;case $s:t*=n.innerHeight/100;break;case ws:t*=n.innerWidth/100;break;case Cs:t*=Math.min(n.innerWidth,n.innerHeight)/100;break;case Ms:t*=Math.max(n.innerWidth,n.innerHeight)/100;break;case qt:case"":break;default:return s}return t},_}),define("_const",!0);var ea="Infuze Creator",Qs="asset",ui=">",y=",",h=":",Zs=";",v="-",ut="#",Gs="http",e=".",Vs=e+"ttf",Us=e+"woff",z="=",Ge="handler",Ke="&nbsp;",Ci="/",c=" ",Js="after",Xs="before",Vt="type",gt="text",Ue="a",U="audio",wt="body",Ys="br",Je="button",u="div",Xe="h1",Ye="h2",je="h3",js="header",Yt="hr",qs="iframe",F="img",Gt="input",ii="link",Zt="script",fi="select",m="span",Si="svg",Be="table",Ws="t"+wt,Ji="textarea",mt="td",Bs="th",Es="time",Ns=Bs+"ead",Hs="tr",ze="video",Pe="update",j="click",zs="contextmenu",Ps="dragstart",Fs="ended",Is="error",Ie="fullscreenchange",Rs="keydown",pt="load",ni=pt+"ed",he="mouse",K=he+"down",tt=he+"move",bt=he+"up",ks="orientationchange",Oe="resize",Ti="scroll",As="time"+Pe,Le="touch",_t=Le+"end",Z=Le+"move",ht=Le+"start",Os="calc",C="em",re="none",Et="%",qt="px",Ls="r"+C,$s="vh",Ms="vmax",Cs="vmin",ws="vw",$e=100+Et,Ai="copy",Pt=Ai+"_drags",Ht="drag",_s="drop",W="feedback",jt="footer",Ce="fullscreen",Se="html",hi="image",xs="items",$="left",gi="limit_attempts",x="module",oe=x+"s",ps="_path",ds="random",X="right",s="settings",Dt="story",i="theme",cs="You scored ",St="attempts",hs="colour",Fi="common",be="count",ls="data",ti="dialog",os="false",ve="first",rs="get",en="goto",ss="help",li=hi+"_"+$,ns=li+"_unique",ci=hi+"_"+X,is=ci+"_unique",di="index",B="marked",pi="nav",me=pi+"igate",mi="pass",ee="parent",ie="persist",ne="points",Qn="print",ge="refresh",pe="reset",fe="reveal",E="score",Kn="set"+mi,ue="showPath",Li="startup",Vn="state",ke="submit",Jn="total",de=Es+"r",Yn="true",Ei="viewed",Di="js",Yi="min"+e+Di,Xi="java",jn="fullscreenElement",Wn="exitFullscreen",Dn="requestFullscreen",tn="absolute",Bn="bottom",It="top",Lt="auto",Ii="background",rt=Ii+"-image",ai="block",ri="bold",Qe="border",En="box-shadow",Nn="center",Hn="class",Q="color",et=Ii+v+Q,Ft=Qe+v+Q,Fn="complete",In="content",Ut=In+"editable",An="disable",p=An+"d",Ln="display",Tn="fadeIn",_i="fadeOut",L="font",ot=L+"-family",xt=L+"-size",Cn=L+"-style",_n=L+"-weight",b="hidden",R="height",Oi="hover",De="id",xn="_"+De,vn="inline",mn=vn+"-"+ai,T="invisible",Pi="italic",gn="margin",pn=gn+v+It,Ni="normal",un="opacity",Bi="overflow",on=Bi+"-x",rn=Bi+"-y",qi="padding",an=qi+v+$,as=qi+v+X,ct="play",Ct="pause",Ui="position",nn="src",Ki="style",Gi="visibility",P="width",G="z-index",D="max",Vi=D+v,Y="min",sn=Y+v,ji=Vi+R,Wi=Vi+P,V=sn+P,ln=Qe+v+Bn+v+P,hn=Qe+v+It+v+P,cn="star",f="abc",r=f+v,fn=r+"activities",N=r+U,zi=N+"-control",qe=N+"-wrapper",We=r+"background",bn=We+v,yn=r+"box",ki=yn+v,Ne=ki+1,wn=r+Je,Sn=r+Je+"s",Qt=r+"clone",Mn=r+"close",$n=r+hs,kt=$n+v,Nt=kt+1,On=r+"complete",Jt=r+"content",kn=Jt+"-box",Rn=r+Ai,it=r+"cross",te=r+"dfn-popup",Pn=r+ti,zn=r+p,g=r+"draggable",le=g+"-dragging",Bt=r+"drags",q=r+"droppable",Qi=q+"-"+Oi,dt=r+W,qn=r+"fill_the_gaps",zt=r+jt,Hi=r+Ce,Xn=r+"full"+v+P,yt=r+js,Un=r+"icon",ce=r+"image",$i=ce+"back",Gn=r+"menu",Zn=r+x,xi=r+"nav",ts=r+"parent",es=r+"select",I=es+"ed",At=r+"show",oi=r+"slideout",si=r+gt,lt=r+"tick",A=r+"visible",$t="ui-",ye=$t+"front",O=$t+"line",_e=$t+"loading",we=$t+"modal",fs=$t+"state-",yi=fs+Oi,gs="dragdrop",ms="editable",vs="fill_the_gaps",bs="group",ys="link",se="-1",d="-2",H="-3",Ss="-4",at="-5",Ot="-6",wi="-7",Ts="-8",bi="-9",Te="-a",ft="-b",Ae="-c",Re="-d",Kt="-e",Fe="-f",Ri="-g",Mi="-h",ae="-i",He="-j",J="-k",t="-l",Ds="-m",Ee="-n",nt="-o",vi="-p",k="-q",Ve="-r",Zi="-s",Rt="-t",Xt="-u",Tt="-v",_="-w",vt="-x",M="-y",ta="-z",w="-A",S="-B",na="-C",st="-D",Ze="-E",Me="-F",a="-G";define("activity",[Mt,xe,ra],function(g,O){function Wt(){if(!Wt.done){Wt.done=!0;var t=navigator.userAgent.toLowerCase();-1!==t.indexOf("safari/")&&-1!==t.indexOf("windows")&&alert("Please install QuickTime to enable Audio or Video in Safari on Windows")}}function o(){}function be(t){if(he&&(n.navigator.standalone&&t.css(pn,1+C),t.is(wt)))try{var e=function(){n.scrollTo(0,1)},i=function(){g(Se+y+wt).css(ji,n.innerHeight).css(Wi,n.innerWidth)};g(n).on(Ti,e).on(ks,i),i(),setTimeout(e,1e3)}catch(t){}}function ce(){try{o.parent.find(U+y+ze).pause()}catch(t){}}function Bt(t){g(e+te).not(t).velocity(_i,function(){g(this).remove()})}function ee(t){var e=t.touches?t.changedTouches[0]:t,i=o.mouse;i.x=e.pageX,i.y=e.pageY}function Kt(){var t,e;for(t=0;o.count>t;t++)if(e=o[t],!e._visible){if(!($t+250>Date.now()))return g.rAF(function(){$t=Date.now(),Kt()}),l;o[M](!1,e)}g(n).resize()}function Pt(e,i,n){return e[_]()?!1:n?!!e[t]([s,"letters"]):i&&(e.navigationTitle||e[t]([s,"letters"])||e[t]([s,"pageNumber"]))?!1:!0}function le(){try{for(var t=n;t.parent!==t&&!t.closeABC;)t=t.parent;t.closeABC&&(this.btnClose=O(m,Mn).on(j,function(){for(var t=n;t.parent!==t&&!t.closeABC;)t=t.parent;t.closeABC&&t.closeABC()}))}catch(t){}}function oe(){var i=!0,s=function(t){var e=t[ne];return-1===e&&(e=t[D]),e?(t[B]?t[Lt]?t[E]?e*Math.min(1,(t[E]+t[Y])/(t[D]-t[Y])):0:"?":"-")+" / "+e:"-"};o.API.addModule(ue,{always:!0,nice:5,startup:function(){g.stylesheet({"#abc>.abc-activities>.showPath>.abc-slideout":"position:absolute;top:0;left:0;right:0;margin:0;text-align:center;z-index:1000;padding:0;pointer-events:all;user-select:all;font-family:sans-serif;font-size:16px;","#abc>.abc-activities>.showPath>.abc-slideout>div":"display:none;background:lightgrey;border:2px solid red;border-bottom-left-radius:0.25em;border-bottom-right-radius:0.25em;vertical-align:bottom;border-top:none;","#abc>.abc-activities>.showPath>.abc-slideout>div>table":"border-collapse:separate;border-spacing:1px;margin:0;padding:0.5em;width:auto;","#abc>.abc-activities>.showPath>.abc-slideout>div>table td":"padding:0.1em;width:auto;vertical-align:bottom;","#abc>.abc-activities>.showPath>.abc-slideout>div>table td:first-child":"text-align:right;","#abc>.abc-activities>.showPath>.abc-slideout>div>table td+td":"background:white;border-radius:3px;","#abc>.abc-activities>.showPath>.abc-slideout>div>table td+td>input":"border:none;padding:1px 3px;width:15em;cursor:text;","#abc>.abc-activities>.showPath>.abc-slideout>div[style*=inline]+span":"border-bottom-width:1em;","#abc>.abc-activities>.showPath>.abc-slideout>span":"display:block;width:5em;margin:0 auto;border-bottom:0.5em solid red;border-bottom-left-radius:0.5em;border-bottom-right-radius:0.5em;","#abc>.abc-activities>.showPath>.abc-slideout>span:hover":"border-bottom-width:1em;"})},load:function(w){var d=g(this.id);if(n.abc.showPath&&!d.hasClass(ue)){var o,p,r=g.currentHandler,a=r[t].bind(r),x=function(){return this.select(),!1},l="D j M Y, g:i:sa",f=a(["_date"],""),c=a(["_editor"],""),v=a(["_edited"],""),b=a(["_creator"],""),y=a(["_created"],""),_=function(e,t){(g.isNumber(t)||(g.isString(t)||g.isArray(t))&&t.length)&&O(Hs,O(mt,"="+e+":"),O(mt,O(Gt,"type=text","readonly=","name="+e,"value="+t))).appendTo(p)},h={Version:ye,ID:a(["_id"]),File:a(["_path"]),Name:a(["_name"],"").fromBBCode(),Type:r.type+(r._type?" -> "+r._type:""),Modules:Object.keys(a(["modules"],{})||{}),Creator:b&&!c?b:null,Created:y&&!c?new Date(y).format(l):null,Editor:c,Edited:v?new Date(v).format(l):null,Changed:f?new Date(f).format(l):null,Score:s(w)};O(u,oi,O(u,p=O(Be).on(K,Gt,x)),O(m).on(j,function(){return i=!i,g(e+oi).children(u).velocity("slide"+(i?"Up":"Down"),{display:i?re:mn}),!1})).appendTo(d.addClass(ue));for(o in h)h.hasOwnProperty(o)&&_(o,h[o])}},persist:function(t){g(this.id+">.abc-slideout input[name=Score]").val(s(t))}})}var ye=g.log(ea+c+"v0.14.8 (Monday 25th Jul 2016 14:37:20)"),q=n.document,Mt=q.location,vt=[],$t=Date.now();g.event.props.pushOnce("touches","changedTouches");var he=(n.abc=g.extend({},{showPath:!1,duration:400,lineCount:40,minSize:50,maxSize:200,footer:"fullscreen,help,print|?submit,?reset,?reveal|first,left,nav,right"},n.abc),n.navigator&&/mobile/i.test(n.navigator.userAgent)),Qt=400,v=o.prototype;o.ActivityTypes={},o[wi]=function(i){var e=function(){o.call(this)},t=e.prototype=new o;return o.ActivityTypes[i]=e,t.constructor=e,t.type=i,t.proto=o.prototype,t},o.handler=null,o[Xt]=function(){var i=0,a=function(t){return t===Lt||t===Ti};o.parent[0].addEventListener(j,function(t){return t[f]?l:(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),!1)},!0),g(q).on(Rs,function(i){var t=i.keyCode,n=o.handler,s=g(q.activeElement),a=s.is("body");if(9===t){var r=n.context.find(".abc-dialog,.abc-content").first().find(":focusable"),l=r.length,h=r.index(i.target),e=h+(i.shiftKey?-1:1);l&&(0>e?e=l-1:e>=l&&(e=0),h!==e&&r.eq(e).focus())}else if(13===t&&a)n.onSubmit();else if(33===t||37===t&&a)n.onLeft();else if(34===t||39===t&&a)n.onRight();else{if(32!==t||!s.is("button"))return;s.click()}i.preventDefault()}),o.parent.on(ht+c+K,function(l){if(!l.isDefaultPrevented()&&o.handler&&!g(l.target).closest(Gt+y+Ji+y+"["+Ut+"='true']")[0]&&2>l.which){o.momentum=i=0;var h,m,M=o.handler,O=M.context,w=l.target,C=w,r=null,c=!!l.touches,x=0,b={Left:c?l.changedTouches[0].pageX:l.pageX,Top:c?l.changedTouches[0].pageY:l.pageY},d={Left:b.Left,Top:b.Top},v=o.$activities[0],L=o.parent[0],u=[],T=function(){for(var t=Date.now();u.length&&t-100>u[0][0];)u.shift()},$=function(){g(q).off(e+f)};l.preventDefault(),g(q).on((c?Z:tt)+e+f,function(l){if(!c&&!l.which||l.isDefaultPrevented()){if($(),r===v){var k=o.$activities.children(e+f+":visible");o[S](k.eq(Math.range(0,Math.round(Math.max(1,r.scrollLeft)/r.clientWidth),k.length-1)).data("index"))}}else{if(C=l.target,d.Left=c?l.changedTouches[0].pageX:l.pageX,d.Top=c?l.changedTouches[0].pageY:l.pageY,!r){var i,A,y=b.Top-d.Top,w=b.Left-d.Left,R=Math.abs(w)>9,I=Math.abs(y)>9;if(!R&&!I)return;for(i=l.target;!r&&i&&i!==q.body&&(A=n.getComputedStyle(i),i===L&&(i=v),R&&(i===v&&!M[_]()&&M[t]([s,me],!0)||a(A[on]))&&(0>w&&i.scrollLeft||w>0&&i.scrollWidth>=i.scrollLeft+i.clientWidth+w)&&(r=i,h="Left",m="Width"),I&&a(A[rn])&&(0>y&&i.scrollTop||y>0&&i.scrollHeight>i.scrollTop+i.clientHeight+y)&&(r=i,h="Top",m="Height"),i!==v);i=i.parentNode);r?(x=r["scroll"+h],r===v&&(o.$activities.velocity("stop"),O.css(G,1))):$()}if(r&&!o.$abcFooter.hasClass(p)){u.push([Date.now(),d[h]]),T();var g=d[h]-b[h];0>g?g=Math.min(r["scroll"+m]-r["client"+m],x-g):g>0&&(g=Math.max(0,x-g)),r["scroll"+h]=g,l.preventDefault()}}}).one(c?_t:bt,function(t){if($(),r){if(T(),u.length>1){var c=u.shift(),d=u.pop(),x=(d[0]-c[0])/1e3;i=(d[1]-c[1])/x}var a=.4*i,l=r["scroll"+h],s=Math.min(1,r["client"+m]/Math.abs(a)/2);if(r===v){var p=o.$activities.children(e+f+":visible");(i>10||-10>i)&&(l-=a,o.momentum=s),o[S](p.eq(Math.range(0,Math.round(Math.max(1,l)/r["client"+m]),p.length-1)).data("index"))}else g(r).children().first().velocity("scroll",{axis:"Left"===h?"x":"y",offset:l-a/2,container:r,duration:400,easing:s?[.02,Math.range(.01,s,.97),.47,1]:"swing"})}else if(!t.isDefaultPrevented()){var b=C?g(w).commonFirst(C):w,y=b.is(fi),n=q.createEvent("MouseEvents");n.initMouseEvent(y?K:j,!y,!0,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n[f]=!0,b[0].dispatchEvent(n)}})}}).on(j,e+f+c+"dfn",function(t){var i,n=g(this);i=n.next(e+te),Bt(),i.length||(i=O(u,te,"="+n.data("title"),O(m)).insertAfter(n).velocity(Tn).position({my:"center top",at:"center bottom",of:t,collision:"fit",within:n.closest(e+f),using:function(n,a){for(var i=a.target.top-g(t.target).offset().top,s=n.top-i,e=parseFloat(g(t.target).css("line-height"));i>e;)i-=e,s+=e;g(this).css({top:s+e+11,left:n.left})}}),i.children(m).position({my:"center",at:"center",of:t,collision:"fit",using:function(t){g(this).css($,t.left)}}))}).on(K+c+ht,function(t){g(t.target).closest(e+te+",dfn").length||(Bt(),o.closeMenu())}).on(j,e+N,function(i){if(!(i.which>1)){var t=g(this),n=t.children(U),e=n[0];return e.play?e[t.hasClass(ct)?Ct:ct]():Wt(),!1}}).on(K+c+ht,e+zi,function(i){if(!(i.which>1)){var a=g(this),r=a.closest(e+qe).find(U),t=r[0],n=a.getRect(),s=!!i.touches,l=!t.paused,o=function(e){t.currentTime=Math.range(0,(e-n.left)/(n.right-n.left)*t.duration,t.duration-.1)};t.pause(),r.triggerHandler("pause"),o(i.pageX),g(wt).on(s?Z:tt,function(t){o(t.pageX),t.preventDefault()}).one(s?_t:bt,function(){g(this).off(s?Z:tt),l&&t.currentTime&&t.play(),i.preventDefault()})}})},o[Ze]=function(i,c){var k=g(ut+f);if(!k[0])return n.setTimeout(o[Ze].bind(o,i,c),1e3),l;if(o.waitScripts=0,o._readonly=/[?&]readonly(?:[=&]|$)/i.test(Mt.search),g.isArray(i)&&1===i.length&&(i=i[0]),g.isPlainObject(i)){var _,w,a,F,R=i.defaults||{};if(o.uuid=i._uuid,i.modules)for(a in i.modules)i.modules.hasOwnProperty(a)&&(o.abcModulesGlobal[a]=i.modules[a]);if(F=i,i._children)for(delete i.defaults,i=g.extend([],(w=i)._children),delete w._children,a=0;i.length>a;a++)_=i[a]._type,_===bs||_===ys?i.splice(a--,1):i[a]=g.extend(!0,{},w,R[_],i[a]);else i=[g.extend(!0,{},R[i._type],i)]}else if(!g.isArray(i))throw"Bad activity data";var C=Mt.hash;c=C?C.regex(/^#(?:urn:ABC:)?(.*)$/):c||0,g.isNumber(c)&&c>0&&i.length>=c&&(c=i[c-1]._id);for(var a=0;i.length>a&&c!==i[a]._id;a++)if(c===i[a]._path){c=i[a]._id;break}a===i.length&&(a=0,c=i[0]._id),o.CurrentActivity=a,o.handler=o.lastHandler=null,o.parent=g(ut+f).addClass(ts).append(o.$activities=O(u,fn)),g(ut+f).on(zs,!1),o.$abcFooter=O(u,zt,O(Yt)).prependTo(o.parent),o[Ee](),o[Xt](),be(k),define("cssReady",function(){"use strict";function t(e){return o.cssLoaded||o.themeLoaded?e(q):s.push(e),t}var e=O(m,"visibility:hidden;position:absolute;").appendTo(o.parent),i=0,n=0,a=Date.now(),s=[];return function c(){var r=e.width(),l=e.height();if(i!==r&&(i=r,o.cssLoaded=!0),n!==l&&(n=l,o.themeLoaded=!0),i&&n||Date.now()-a>2e3){o.cssLoaded=o.themeLoaded=!0,e.remove();for(var t=0,h=s.splice(0,s.length);h.length>t;t+=1)h[t](q)}else g.rAF(c)}(),t.version="1.0.0",t.load=function(n,s,e,i){i.isBuild?e(null):t(e)},t}),define("domReady",function(){"use strict";function i(){if(!s&&(s=!0,e.length)){var t,i=e;for(e=[],t=0;i.length>t;t+=1)i[t](q)}}function t(i){return s?i(q):e.push(i),t}var s=!1,e=[];return"complete"===q.readyState?i():(g(q).on("DOMContentLoaded",i),g(n).on("load",i)),t.version="1.0.0",t.load=function(n,s,e,i){i.isBuild?e(null):t(e)},t});var a,h,p,v,I=function(t){o.handler[t.data](t)},L=function(){for(var e=0,s={};o.count>e;e++)o[e].doNotMark||(s["#activity_"+(e+1)]=o[e][t](["_path"],e));o.api(Li,s),o.api_started=!0;var a,l,h,c,i=o[nt](jt).split("|"),d=[Ce,ss,Qn,E,ke,pe,fe,ve,$,pi,X],n=function(s,l){var e,t,i,a,n;for(e=0;s.length>e;e++)t=s[e],n="?"===t[0],n&&(t=t.substr(1)),d.indexOf(t)>-1&&(i=t.ucfirst(),o.initList.push("check"+i),a=o["$abc"+i]=O(Ue,r+t).data(A,n?T:b).appendTo(l).on(j,null,"on"+i,I),t===E&&a.append(O(m),O(m)))};i[0]&&n(i[0].split(y),l=O(m,$)),i[1]&&(h=O(m,Nn,a=O(m)),n(i[1].split(y),a)),i[2]&&n(i[2].split(y),c=O(m,X)),o.$abcFooter.append(h,l,c),o.initList.push("checkDisabled");var u=o.handler=vt.shift();u.setTitle(),u[S]()},M=[Fi+e+Y];for(a=0;i.length>a;a++)p=i[a],v=p._type,v=v+"/"+v+(p[s]&&p[s][Vt]?e+p[s][Vt]:""),M.pushOnce(v);require(M,function(){var a;for(oe(),a=0;i.length>a;a++){if(p=i[a],h=o[a]=new o.ActivityTypes[p._type],o.count=a+1,h.index=a,h.data=p,h.baseId="#activity_"+(a+1),o[h.baseId]=h,h.buildTheme(),p._id===c&&(o.start=a,o.CurrentActivity=a),vt.push(h),a||(o.commonPath=Mt.href.replace(/(\/[^\/]*)$/,"/")+h[d](Fi+e+Yi).replace(/[^\/\\]*$/i,"")),p.modules)for(var s in p.modules)if(p.modules.hasOwnProperty(s)){o.abcModules[s]=o.abcModules[s]||null,o.abcModulesIndex[s]=o.abcModulesIndex[s]||[],h[x]=h[x]||{};var r=p.modules[s];g.isPlainObject(r)&&r.global&&(o.abcModules._data[s]=o.abcModules._data[s]||{},g.extend(!0,o.abcModules._data[s],r.global),r=r.data),h[x][s]={data:r,index:o.abcModulesIndex[s].length},o.abcModulesIndex[s].push(h.baseId)}var m=h[t]([Di]);if(m){g.currentHandler=h;var u=q.createElement("script");u.type=gt+Ci+Xi+Zt,u.text="(function(activity){"+m+'}("'+h.baseId+'"))',o.parent[0].appendChild(u)}}var s,l=["domReady!","cssReady!"];for(s in o.abcModules)o.abcModules.hasOwnProperty(s)&&null===o.abcModules[s]&&(s=f+e+s+(e+Y),l.push(""+s));l.length&&l.unshift("velocity-ui"),require(l,L,function(t){t&&(n.alert("Error loading required content!\n\nPlease reload page to prevent errors!"),g.log("RequireJS Load Error:",typeof t,t)),L()})})},o[Me]=function(){var e=o.handler,n=o.$abcFooter.children(Yt),s=e[t]([i,jt])?"url('"+e[d](jt)+"')":"";n[0]&&n.data(rt)!==s&&n.css(rt,s).data(rt,s),e.initList()},o[S]=function(r,h){if(o.cssLoaded&&o.themeLoaded){r=Math.range(0,r,o.count-1);var c=o[r].data;if(c&&g.isString(c._type)&&o.ActivityTypes.hasOwnProperty(c._type)){var n,s,e=o[r],d=o.handler!==e;if(h=h||1,d&&(ce(),n=o.lastHandler=o.handler),o.CurrentActivity=r,o.handler=e,e.visited||(e.visited=!0),s=e.context,n){var u=q.activeElement;if(u&&"BODY"!==u.tagName&&g(u).blur(),n.timer(!1),!s.is(":visible")){var f=o.$activities[0];f.scrollLeft=f.scrollLeft+s.show().width()}s.position().left&&(n.context.css(G,1),s.velocity("scroll",{axis:"x",container:o.$activities,duration:Qt*h,easing:o.momentum?[.02,Math.range(.01,o.momentum,.97),.47,1]:"swing",complete:function(){if(o[Me](),n.context.css(G,""),n[_]()){var t=n.context,i=t.position(),s=o.$activities[0],e=0;0>i.left&&(e=t.width()),t.hide(),s.scrollLeft-=e,n===o.lastHandler&&(o.lastHandler=null)}}}))}else s.position().left&&(e.context.css(G,1),s.velocity("scroll",{axis:"x",container:o.$activities,duration:Qt*h,easing:o.momentum?[.02,Math.range(.01,o.momentum,.97),.47,1]:"swing",complete:function(){e.context.css(G,"")}}));return e.setTitle(),o.started||o[Me](),o[M](),(d||!o.started)&&(o.started=!0,e[a](Ei)||e[a](Ei,Date.now()),o.loadState||e[a](ne)||!e[t]([i,"hideSubmit"],e.hideSubmit)||e[a]({progress:1,marked:!0}),o.api(me,e.baseId,n?n.baseId:null)),e[a](B)||e.timer(!0),l}}},o[M]=function(e,i){var t=i||o.handler;o.cssLoaded&&o.themeLoaded&&t&&t.context&&!t.loadingCount&&g.rAF(function(e,i){g.currentHandler=t,this.fixRatio(),this[M](this.fixHeaderFooter(),e===l?!0:e),o.api(ge,this.baseId),this._visible||(this.context.css(Gi,""),this._visible=!0),i&&this===o.handler&&(o.$activities[0].scrollLeft+=this.context.position().left)}.bind(t,e,o.resizeEvent))};var ae,Ht,V;o[Ee]=function(){var t=o.parent[0].clientHeight;return ae!==t&&(ae=t,Ht||(Ht=o[nt]("lineCount",20)),V=t/Ht,o.emSize!==V&&(o.emSize=V,o.parent.css(xt,V+qt),o.$activities.css(R,(t-o.$abcFooter.outerHeight(!0))/V+C))),V},o.resizeTime=0,g(n).on(Oe,function(i){if(i.target===n&&o.handler&&o.handler.context){var t=Date.now(),e=t-o.resizeTime>500;e&&Bt(),o.api(Oe,o.handler.baseId),o.resizeEvent=!0,o[M](e),o.resizeEvent=!1,o.resizeTime=t,o.resizeMenu()}}),g(q).on(Ps,ut+f,function(){return!1}).on("webkit"+Ie+c+"moz"+Ie+c+Ie,function(){o[Ve](q.fullScreen||q.mozFullScreen||q.webkitIsFullScreen),o[M]()}),o[Ve]=function(t){Modernizr.fullscreen&&(g.isBoolean(t)||(t=!Modernizr.prefixed(jn,q)),t?(Modernizr.prefixed(Dn,o.parent[0])||g.noop)():(Modernizr.prefixed(Wn,q)||g.noop)(),o.parent.find(e+Hi).toggleClass(Hi+"-active",t))},o.initList=[],o.mouse={x:0,y:0},q.addEventListener(tt,ee,!0),q.addEventListener(Z,ee,!0),v.context=null,v.baseId="",v.content=null,v[H]=function(t,e){return this._type&&t.hasOwnProperty(this._type)?t[this._type].apply(this,g.isArray(e)?e:[].slice.call(arguments,1)):l},o[nt]=v[nt]=function(t,e){return n.abc.hasOwnProperty(t)?n.abc[t]:e},v.toEM=function(e,t){return t=t||0,e/o.emSize+t+C},v[w]=function(t,e,i){return(i||this.data).setTree(t,e)},v[a]=function(e,i){var n=!1,t=this.persistData,s=function(e,i){o.loadState||e===De||e===Vt||!t.hasOwnProperty(e.split(".")[0])||t._loaded&&/^(pass|setpass|points|question)$/.test(e)||(t.setTree(e,i),n=!0)};if(g.isPlainObject(e))for(var a in e)s(a,e[a]);else{if(i===l)return t.getTree(e,"");this.doNotMark||s(e,i)}return n&&o.loaded&&!o._readonly&&t._loaded&&o.api(ie,this.baseId,t),this},n.persist=function(n,s,r){var t,i=q.getElementsByTagName("iframe");for(t=0;i.length>t;t++)try{if(i[t].contentWindow===n)return g(i[t]).closest(e+f).data(Ge)[a](s,r)}catch(t){}},v[Tt]=g.False,v[ta]=g.noop,v[t]=function(t,e,i){return(i||this.data).getTree(t,e)},v.has=function(t){return this.data.hasTree(t)},v[k]=function(i,n){var e=this[t](i,n),s=g.currentHandler;return g.currentHandler=this,e=e?(""+e).fromBBCode():"",g.currentHandler=s,e},v[vi]=function(){var e=this[t](["intro"])||this[t](["subtitle"])||this[t](["_name"],"")||Ke;return e.replace(/(\[[^\]]*\])/g," ").replace(/\s\s/g," ").trim()},v[na]=function(t,e){return this[w](t,e,this.answers)},v[Ds]=function(e,i){return this[t](e,i,this.answers)},v[st]=g.noop,v[_]=g.False,v[Ot]=g.noop,v[Ss]=function(n,i){var e=this[t]([xs,n,1]);return e===i||g.isArray(e)&&e.indexOf(i)>=0?!0:!1},v[at]=g.noop,v.uniqueId=function(){return f+"_"+this.index+"_"+this.uniqueIdNumber++},v[Rt]=function(n){g.currentHandler=this;var e,i;for(e in this)!this.hasOwnProperty(e)||"$"!==e[0]&&"_"!==e[0]||delete this[e];this.answers={},this.uniqueIdNumber=0,i=parseFloat(this[t]([s,"font_size"],0)),this._autoSize={minSize:i||this[t]([s,"font_min_size"])||o[nt]("minSize",50),maxSize:i||this[t]([s,"font_max_size"])||o[nt]("maxSize",200)},n&&(this._type=this[t]([s,Vt],n)),(this.doNotMark||this[t]([s,"discussion"],!1))&&(this.hideSubmit=this.hideReset=this.hideReveal=!0),this.persistData={id:this[t](["_path"]),type:this.type+(this._type?" - "+this._type:""),pass:this[t]([s,mi],-1),setpass:this[t]([s,Kn],-1),points:this[t]([s,ne],-1),question:this[vi](),answers:[],attempts:0,auto:!0,marked:!1,max:0,min:0,progress:0,response:[],score:l,state:{},viewed:0,timer:0}},v[ft]=function(){g.currentHandler=this,this._disabled=!1,this.content.empty().removeAttr("style").removeClass().addClass(Jt+c+r+this.type+(this._type?c+r+this.type+"-"+this._type:"")).siblings(F).remove();var n,s=this.content.parent(),e=this[t]([i,"right_image"]);n=this[t]([i,"right_space"]),this.content.css("padding-right",n?n+"%":n),e&&O(F,"src="+this[d](e===!0?"right_image":e),"right:0",this[t]([i,"right_image_space"])&&n?"height:auto;width:"+n+"%;":null,"padding-left:"+this[t]([i,"right_image_left_padding"],0)+"em;padding-right:"+this[t]([i,"right_image_right_padding"],0)+"em;").prependTo(s),e=this[t]([i,"left_image"]),n=this[t]([i,"left_space"]),this.content.css("padding-left",n?n+"%":n),e&&O(F,"src="+this[d](e===!0?"left_image":e),"left:0",this[t]([i,"left_image_space"])&&n?"height:auto;width:"+n+"%;":null,"padding-left:"+this[t]([i,"left_image_left_padding"],0)+"em;padding-right:"+this[t]([i,"left_image_right_padding"],0)+"em").prependTo(s),e=this[t]([i,"background_image"]),e&&(this[t]([i,"background_image_full"])?this.context.css(rt,"url('"+this[d](e===!0?"background_image":e)+"')"):O(F,"src="+this[d](e===!0?"background_image":e),"left:0;right:0;width:100%").prependTo(s)),this.h1.html(this[k](["_name"],Ke)),this.h2.html(this[k](["subtitle"],Ke)),this.h3.toggle(!!this[t](["intro"])),this[t]([i,"text_shadow","content"])&&this.content.addClass("abc-text-shadow")},v.checkScore=function(){var t=this[a](ne),e=o.$abcScore;-1===t&&(t=this[a](D)),e&&(e=e.toggleClass(e.data(A)?T:b,!t).children(),t&&(e.eq(0).text(this[a](B)?parseFloat((this[a](E)?t*Math.min(1,(this[a](E)+this[a](Y))/(this[a](D)-this[a](Y))):0).toFixed(1)):"-"),e.eq(1).text(t)))},v.onScore=function(){return!1},v.initList=function(){if(!this.initList.running){this.initList.running=!0;for(var t=0;o.initList.length>t;t++)this[o.initList[t]]();this.initList.running=!1}return this},v[M]=g.False,v[se]=function(){this.loadingCount||this.context.loading(!0),this.loadingCount=(this.loadingCount||0)+1},v[J]=function(){this.loadingCount--,this.loadingCount||(this._loaded=!0,o.api(pt,this.baseId,this.doNotMark?{}:this.persistData),this.context.loading(!1),o.started||this.index!==o.CurrentActivity||o[S](o.CurrentActivity),o[J]())},o[J]=function(){var i,t,n;if(!o._paused){for(i=0;o.count>i;i++)if(!o[i]._loaded)return;for(o.loadState=!0,o.parent.find(e+qe+c+U).audio(),i=0;o.count>i;i++)t=o[i],n=t[a](B)&&!t.hideSubmit,t.persistData._loaded=!0,o.api(ie,t.baseId,t.persistData),t[Tt](n)!==!1&&n&&(t._btnSubmit=!0,t.onSubmit()),t.initList();o.loadState=!1,o.loaded=!0,o.api(ni,o.handler.baseId),o._readonly&&(o.parent.find("["+Ut+"]").prop(Ut,os),o.parent.find(Gt+y+fi+Ji).prop(p,Yn)),Kt()}},v.timer=function(e,n){var t=this[a](de),i=Date.now();return o.api("timer",this.baseId,e,n)!==!1&&(e===!0?(this._timer=i,n&&(t=0)):e===!1&&this._timer&&(t+=(i-this._timer)/1e3,this._timer=0)),this._timer&&(t+=(i-this._timer)/1e3),o.loadState||this[a](de,t),1e3*t},v[Te]=function(c,h,b){if(h&&this.index===o.CurrentActivity&&!this.$feedback&&o.api(W,this.baseId,c,h,b)!==!1&&!this[t]([s,W])){var d=-1,v=Math.floor(100*c/h),w=this[t]([W],{});if(d=w.bestMatch(v),d!==l){var p,f,r,S=this[a](St),y=O(u,"abc-total",z+cs+(b?v+Et:c+" out of "+h),O(Ys)),x=this[t]([i,W+"_duration"],0),_=this[Zi].bind(this);for(f=g.isString(d)?d:d.text;g.isString(r=f.regex(/\{([^{]*?)\}/));)r=r.split("~"),r=r[Math.min(S,r.length)-1],r=r.split("|"),r=r[Math.floor(Math.random()*r.length)],f=f.replace(/(\{[^{]*?\})/,r.trim());for(b&&(c=v/10,h=10),p=0;h>p;p++)O(m,"abc-stars",c>p?cn:null).appendTo(y);return this.$feedback=O(u,dt,"opacity:0",O(je,z+f.fromBBCode()),this[t]([i,W+"_stars"],!0)?y:null).data(dt,Date.now()).appendTo(this.context).modal(!0,x).autoTextSize().position({my:"center",at:"center",of:this.context}).velocity("fadeIn",x,function(){this.context.one(j+e+dt,_);var s=this[t]([i,W+"_delay"],5);s&&this.$feedback.data("delay",n.setTimeout(_,1e3*s))}.bind(this)),!0}}return!1},v[Zi]=function(){var s=this.$feedback;s&&Date.now()-s.data(dt)>100&&(this.$feedback=null,n.clearTimeout(s.data("delay")),this.context.off(e+dt),s.modal(!1).velocity(_i,this[t]([i,W+"_duration"],0),function(){s.remove()}.bind(this)))},v.countLeft=function(i,n){var t,e=0;for(t=0;this.index>t;t++)Pt(o[t],i,n)&&e++;return e},v.getLeft=function(){for(var t=this.index-1;t>=0&&o[t][_]();)t--;return t>=0&&!o[t][_]()?t:!1},v.countTotal=function(i,n){
var t,e=0;for(t=0;o.count>t;t++)Pt(o[t],i,n)&&e++;return e},v.countRight=function(i,n){var t,e=0;for(t=o.count-1;t>this.index;t--)Pt(o[t],i,n)&&e++;return e},v.getRight=function(){for(var t=this.index+1;o.count>t&&o[t][_]();)t++;return o.count>t&&!o[t][_]()?t:!1},v.complete=!1,v.checkDisabled=function(){this.content.toggleClass(zn,this._disabled)},v.defaultFullscreen=!0,v.hideFullscreen=!1,v.checkFullscreen=function(){return this.onFullscreen(this.defaultFullscreen,!Modernizr.fullscreen||this.hideFullscreen||!this[t]([s,Ce]))},v.onFullscreen=function(t,e){if(this===o.handler&&o.$abcFullscreen)if(g.isBoolean(t)){var i=o.$abcFullscreen.toggleClass(p,!t);g.isBoolean(e)&&i.toggleClass(i.data(A)?T:b,!!e),this._btnFullscreen=t}else this._btnFullscreen!==!1&&o[Ve]();return this},v.defaultHelp=!1,v.hideHelp=!1,v.checkHelp=function(){return this.onHelp(!!this[t](["helpText"]),this.hideHelp||this[t]([i,"hideHelp"],!1))},v.onHelp=function(e,i){if(this===o.handler&&o.$abcHelp)if(g.isBoolean(e)){var n=o.$abcHelp.toggleClass(p,!e);g.isBoolean(i)&&n.toggleClass(n.data(A)?T:b,!!i),this._btnHelp=e}else if(this._btnHelp!==!1){var s=this[t](["helpText"]);if(s){this.dialog(null,s,"Close")}}return this},v.defaultPrint=!1,v.hidePrint=!1,v.checkPrint=function(){return this.onPrint(this.defaultPrint,this.hidePrint||this[t]([i,"hidePrint"],!1))},v.onPrint=function(t,e){if(this===o.handler&&o.$abcPrint)if(g.isBoolean(t)){var i=o.$abcPrint.toggleClass(p,!t);g.isBoolean(e)&&i.toggleClass(i.data(A)?T:b,!!e),this._btnPrint=t}else this._btnPrint!==!1&&n.print();return this},v.defaultSubmit=!1,v.hideSubmit=!1,v.checkSubmit=function(e){var n=this[a](B)&&this[a](D)===this[a](E)&&this[t]([i,"disablePerfectSubmit"]);return this.onSubmit(this[a](B)||this._disabled?!1:!n&&!this[t]([i,"disableSubmit"],!this._disabled&&(g.isBoolean(e)?e:!this.defaultSubmit)),this[t]([i,"hideSubmit"],this.hideSubmit))},v.onSubmit=function(i,n){if(g.isBoolean(i)){var r=this[t]([s,gi],0);if(r&&(i=r>this[a](St)?i:!1),o._readonly&&!o.loadState&&(i=!1),this._btnSubmit=i,this===o.handler&&o.$abcSubmit){var l=o.$abcSubmit.toggleClass(p,!i);g.isBoolean(n)&&l.toggleClass(l.data(A)?T:b,!!n)}}else if(this._btnSubmit!==!1){var h=function(t){t||(o.api(ke,this.baseId),this.timer(!1),g(e+I,this.content).removeClass(I),this._disabled=this.complete=!0,this._revealed=!1,this.context.addClass(p),o.loadState||this[a]({marked:!0,attempts:this[a](St)+1}),this[at](),this.initList())}.bind(this);!o.loadState&&this[t](["settings","confirm"])?this.dialog(this[k]([s,"confirm_title"],"Confirm Submit"),this[k]([s,"confirm_text"],"Are you sure you wish to submit your answers?"),["Yes","No"],h):h()}return this},v.defaultReset=!0,v.hideReset=!1,v.checkReset=function(e){var n=this[a](B),s=!n&&this[t]([i,"disableMarkedReset"]),r=n&&this[a](D)===this[a](E)&&this[t]([i,"disablePerfectReset"]);return this.onReset(!s&&!r&&!this[t]([i,"disableReset"],!this._disabled&&(g.isBoolean(e)?e:!this.defaultReset)),this[t]([i,"hideReset"],this.hideReset))},v.onReset=function(i,n){if(g.isBoolean(i)){var r=this[t]([s,gi],0);if(r&&(i=r>this[a](St)?i:!1),o._readonly&&(i=!1),this._btnReset=i,this===o.handler&&o.$abcReset){var l=o.$abcReset.toggleClass(p,!i);g.isBoolean(n)&&l.toggleClass(l.data(A)?T:b,!!n)}}else this._btnReset!==!1&&(o.api(pe,this.baseId),this.timer(!0,!0),this.content.removeClass(On),g(e+I,this.content).removeClass(I),g(e+lt,this.content).removeClass(lt),g(e+it,this.content).removeClass(it),g(e+At,this.content).removeClass(At),this._disabled=this._revealed=this.complete=!1,this.context.removeClass(p),this[Ot](),this.answers={},g.each([lt,it,At],function(i,t){g(e+t+":not("+e+Rn+")",this.content).removeClass(t)}),this[a]({marked:!1,progress:0,score:0,response:[],state:{}}).initList());return this},v.defaultReveal=!0,v.disableReveal=!1,v.hideReveal=!1,v.checkReveal=function(e){var n=this[a](B)&&this[a](D)===this[a](E)&&this[t]([i,"disablePerfectReveal"]),s=this._disabled&&this._revealed&&this[t]([i,"disableSingleReveal"]);return this.onReveal(!n&&!s&&!this[t]([i,"disableReveal"],!this._disabled&&(g.isBoolean(e)?e:!this.defaultReveal)),this[t]([i,"hideReveal"],this.hideReveal))},v.onReveal=function(i,n){if(g.isBoolean(i)){var r=this[t]([s,"reveal_after"]);if(r&&(i=r>this[a](St)?!1:i),this.disableReveal&&(i=!1),o._readonly&&(i=!1),this._btnReveal=i,this===o.handler&&o.$abcReveal){var l=o.$abcReveal.toggleClass(p,!i);g.isBoolean(n)&&l.toggleClass(l.data(A)?T:b,!!n)}}else this._btnReveal!==!1&&o.api(fe,this.baseId)!==!1&&(g(e+I,this.content).removeClass(I),g(e+lt,this.content).removeClass(lt),g(e+it,this.content).removeClass(it),this._disabled=this._revealed=!0,this.complete=!0,this.context.addClass(p),this[st](),this.initList());return this},o.lastFirst=-1,v.defaultFirst=!0,v.hideFirst=!1,v.checkFirst=function(){if(this===o.handler&&o.$abcFirst){var e=!1,n=!!this[t]([s,"letters_first"]),a=!!this[t]([s,"letters"]);e=n&&a?!0:0===this.countLeft(),e||(o.lastFirst=this.index),o.$abcFirst.toggleClass("abc-return",o.lastFirst>=0&&e),this.onFirst(!this[t]([i,"disableFirst"])&&(!e||o.lastFirst>=0),this[_]()||this.countTotal()<=1||!this[t]([i,"showFirst"])||e&&this[t]([i,"hideFirst"])&&0>o.lastFirst)}return this},v.onFirst=function(i,r){var l=this===o.handler&&o.$abcFirst;if(g.isBoolean(i)){if(l){this._btnFirst=i;var h=o.$abcFirst.toggleClass(p,!i);g.isBoolean(r)&&h.toggleClass(h.data(A)?T:b,!!r)}}else if(l&&this._btnFirst!==!1&&o.api(ve,this.baseId)!==!1){var e,n=-1,a=this[t]([s,"letters_first"]);if(!a||!this[t]([s,"letters"]))for(e=0;this.index>e&&(o[e][_]()||a&&!o[e][t]([s,"letters"])||(n=e,a));e++);n>=0?(o.lastFirst=this.index,o[S](n)):o.lastHandler&&o[S](o.lastFirst)}return this},v.defaultLeft=!0,v.hideLeft=!1,v.checkLeft=function(){return this.onLeft(this.countLeft()>0&&!this[t]([i,"disableLeft"]),this.countTotal()<=1||this[_]()||this[t]([i,"hideLeft"],!1))},v.onLeft=function(t,e){var i=this===o.handler&&o.$abcLeft;if(g.isBoolean(t)){if(this._btnLeft=t,i){var n=o.$abcLeft.toggleClass(p,!t);g.isBoolean(e)&&n.toggleClass(n.data(A)?T:b,!!e)}}else if(i&&this._btnLeft!==!1&&o.api($,this.baseId)!==!1){var s=this.getLeft();s!==!1&&o[S](s)}return this},v.defaultNav=!0,v.hideNav=!1,v.checkNav=function(){if(this===o.handler&&o.$abcNav){g.currentHandler=this,o.$abcNav.html("<span>"+this[k]([i,"nav_button"],"[activitycount!]")+"</span>");var e=this.countTotal();this.onNav(!this[t]([i,"ordered"])&&e>1,1>=e||this[_]()||this[t]([i,"hideNav"],!1))}return this},o.resizeMenu=function(){if(o.$abcMenu)for(var i,s=o.handler,n=s.countLeft(),t=n-2,e=s.countRight()-2,a=o.$abcMenu,r=a[0],l=a.children(Ue).removeClass(b),h=r.clientWidth;r.scrollWidth>h;){if(e>=2&&e>=t)i=n+e--;else if(t>=2)i=n-t--;else if(e>0&&e>=t)i=-1-e--;else if(t>0)i=t--;else if(0===e&&e>=t)i=n+1,e--;else{if(0!==t)break;i=n-1,t--}l.eq(i).addClass(b)}},o.closeMenu=function(){o.$abcMenu&&o.$abcMenu.velocity({height:"0"},function(){o.$abcMenu.remove(),o.$abcNav.removeClass(xi+"-open"),delete o.$abcMenu,o.$abcFooter.css(G,"")})},o.clickMenu=function(t){return 2>t.which&&!g(t.target).hasClass(p)&&t.data!==o.CurrentActivity?(o.closeMenu(),o.momentum=0,o[S](t.data),!1):l},v.onNav=function(i,n){var a=this===o.handler&&o.$abcNav;if(g.isBoolean(i)){if(this._btnNav=i,a){var r=o.$abcNav.toggleClass(p,!i);g.isBoolean(n)&&r.toggleClass(r.data(A)?T:b,!!n)}}else if(a&&this._btnNav!==!1){var e,l,h=0,c=0;if(o.$abcMenu)o.closeMenu();else{for(o.$abcMenu=O(u,Gn),e=0;o.count>e;e++)o[e][_]()||(l=o[e][k]([s,"pageNumber"],o[e].navigationTitle)||(o[e][t]([s,"letters"])?String.fromCharCode(97+h++):++c),O(Ue,e===this.index?p:null,o[e].complete?Fn:null,O(m,z+l)).appendTo(o.$abcMenu).on(j,null,e,o.clickMenu));o.$abcMenu.prependTo(o.$abcFooter.css(G,1)).velocity({height:[o.$abcMenu.css(R),0]},function(){o.$abcNav.addClass(xi+"-open")}),o.resizeMenu()}}return this},v.defaultRight=!0,v.hideRight=!1,v.checkRight=function(){return this.onRight(this.countRight()>0&&!this[t]([i,"disableRight"])&&(this[a](B)||!this[a](D)||!this[t]([i,"disableRightSubmit"])),this.countTotal()<=1||this[_]()||this[t]([i,"hideRight"],!1))},v.onRight=function(t,e){var i=this===o.handler&&o.$abcRight;if(g.isBoolean(t)){if(this._btnRight=t,i){var n=o.$abcRight.toggleClass(p,!t);g.isBoolean(e)&&n.toggleClass(n.data(A)?T:b,!!e)}}else if(i&&this._btnRight!==!1&&o.api(X,this.baseId)!==!1&&this.index===o.CurrentActivity){var s=this.getRight();s!==!1&&o[S](s)}return this},v.fixHeaderFooter=function(){var e=o.$activities[0],i=e.clientWidth,n=e.clientHeight,t=this.header.outerHeight(),s=this._headerHeight!==t;return s||this._parentWidth!==i||this._parentHeight!==n?(this._parentWidth=i,this._parentHeight=n,s&&(this._headerHeight=t,this.contentBox.css(It,t/o.emSize+C)),!0):!1},v.fixRatio=function(){var a,e,s,r;for(a=o.parent;!e||!s;a=a.parent())r=n.getComputedStyle(a[0],null),e=e||a.convertCSS(r[Wi],!0),s=s||a.convertCSS(r[ji]),a.is(Se)&&(e=e||a.width(),s=s||a.height());if(o._fixRatioWidth!==e||o._fixRatioHeight!==s){o._fixRatioWidth=e,o._fixRatioHeight=s;var l=this[t]([i,P],0),h=this[t]([i,R],0);if(l&&h){var d=o.parent.is(wt)&&"parentIFrame"in n,c=Math.floor(l*(s/h)),u=Math.floor(h*(e/l));d?n.parentIFrame.size(Math.min(c,e),Math.min(u,s)):o.parent.css(P,Math.min(c,e)).css(R,Math.min(u,s))}return o[Ee](),!0}return!1},o[d]=v[d]=function(t){var e,s;t="/"+t+(t.indexOf(".")>0?"":".");var e,i,s="",a=(this===o?"":"/"+(this.index+1))+t;for(e=0;n.assets.length>e;e++)i=n.assets[e],i.indexOf(i.indexOf("_common")>=0?t:a)>=0&&(s=i);return s};var Dt=Mt.protocol;Dt=/^https?:/.test(Dt)?Dt:Gs+h,v.buildTheme=function(){var s,n,r=function(a,t,e){var i=a+(t||e?"_":"")+(t||"")+(e||""),n=this[d](i+Us),s=this[d](i+Vs);(n||s)&&g.stylesheet("@font-face /*"+i+"*/",[ot+h+"'"+a+"'",nn+(n?h+"url('"+n+"') format('woff'),":"")+(s?"url('"+s+"') format('truetype')":""),_n+h+(t||Ni),Cn+h+(e||Ni)])}.bind(this),f=function(){r(L),r(L,ri),r(L,null,Pi),r(L,ri,Pi)}.bind(this);if(r(Un),n=this[t]([i,L]),n&&!o.parent[0].style[ot]){if(n===!0)f(),n=L;else{var l,a,u,p=n.split("&");for(n=null,l=0;p.length>l;l++)u=p[l],a=u.split(h).shift().replace(/\+/gi," "),"*"===a?(f(),a=L):g(ii+":abc(font,"+a+")")[0]||O(ii,"rel=stylesheet","type=text/css","href=http"+(/^https?:/.test(Mt.protocol)?"s":"")+"://fonts.googleapis.com/css?family="+u.replace(/\s/g,"+")).data(L,a).appendTo("head"),n||(n=a)}o.parent.css(ot,"'"+n+"', sans-serif")}for(n=this[t]([i,"colour"]),n&&(g.stylesheet(e+yt+c+Xe,et+h+n,this.baseId),g.stylesheet(e+zt,et+h+n,this.baseId),g.stylesheet(e+Jt,Ft+h+n,this.baseId),g.stylesheet(e+dt,Ft+h+n,this.baseId)),n=this[t]([i,"colourback"]),n&&(g.stylesheet(e+yt+c+Xe,Q+h+n,this.baseId),g.stylesheet(e+zt,Q+h+n,this.baseId)),n=this[t]([i,"colour2"]),n&&g.stylesheet(e+yt+c+Ye,et+h+n,this.baseId),n=this[t]([i,"colour2back"]),n&&g.stylesheet(e+yt+c+Ye,Q+h+n,this.baseId),n=this[t]([i,"colours"],[]),s=0;n.length>s;s++)s||g.stylesheet(e+_e+y+e+_e+h+Xs+y+e+_e+h+Js,Ft+h+n[s][0],this.baseId),g.stylesheet(e+kt+(s+1),[et+h+n[s][0],Ft+h+n[s][0],Q+h+n[s][1]],this.baseId),g.stylesheet(e+bn+(s+1)+y+e+We+e+kt+(s+1)+y+e+kt+(s+1)+c+We+y+e+At+e+kt+(s+1),[et+h+n[s][1],Ft+h+n[s][0],Q+h+n[s][0]],this.baseId),g.stylesheet(e+ki+(s+1),[En+h+"inset 0 0 0 3px "+n[s][0],et+h+n[s][1]],this.baseId);n=this[t]([i,Ki],{});for(s in n)n.hasOwnProperty(s)&&g.stylesheet(s.replace(/&/g,this.baseId),n[s])},v.dialog=function(n,r,t,s){t=g.isArray(t)?t:[t];var e,i,o=this,a=O(u,Pn,O(!!n,je,z+n),O(u,O(u,z+r.fromBBCode())),t&&t.length?i=O(u,Sn):null).appendTo(this.context).modal(!0).autoTextSize();if(t&&t.length){for(e=0;t.length>e;e++)O(Je,wn,Nt,z+t[e]).on(bt+c+_t,function(t){2>t.which&&(s&&s.call(o,g(this).index()),a.modal(!1).remove(),t.preventDefault())}).appendTo(i);i.children().last().focus()}return a},v.setTitle=function(){q.title=(this.data._name||this.data._path||"Activity").replace(/(\[.*?\])/gi,"")};return v[S]=function(){g.currentHandler=this,le.call(this),o.parent.addClass(this[t]([i,"classname"]));var e=this[t]([i,"show_title"],!0);this.content=O(u,Jt),this.context=O(u,this.baseId,f,Gi+":"+b,o._readonly?p:"").data(Ge,this).data(De,this.data[ps]||this.data[xn]).data(di,this.index).appendTo(o.$activities),this.context.append(this.header=O(u,yt,O(e,u,O(e,F,"src="+this[d]("logo")),this.btnClose,O(e,Xe,this.h1=O(m)),O(e,Ye,this.h2=O(m))),O(je,this.h3=O(m,z+this[k](["intro"],"")),this[t]([i,"banner"])?rt+":url('"+this[d]("banner")+"')":null)),this.contentBox=O(u,kn,this.content));for(var n in this[x])this[x].hasOwnProperty(n)&&this.context.addClass(Zn+"-"+n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase());this[Rt](),this[se](),this[ft](),this.context.css(ot)!==this.context.parent().css(ot)&&(this[se](),this.context.onFontLoaded(this[J].bind(this))),this[J](),vt.length&&($t+250>Date.now()?vt.shift()[S]():g.rAF(function(){$t=Date.now(),vt.shift()[S]()}))},require([aa],function(){n.jQuery=n.$=g,g(Zt).each(function(i){var t=g(this),e=t.text();if(/^\s*".*"\s*$/.test(e)){try{o[Ze](JSON.parse(atob(e.replace(/[^a-z0-9\+\/]/gi,"").reverse())))}catch(t){return}return t.remove(),!1}})}),o}),define("fill_the_gaps/fill_the_gaps.dragdrop",[Mt,xe,Wt,sa,ia],function(n,r,d,i){var l=gs;return i[ae]=function(){return this.content.find(e+I).removeClass(I),!0},i[Kt]=function(i,r){var f,h,b,v=[],u=i.parent(),m=this[t]([s,Pt]),p=this[t]([s,Dt]);if(p&&(i.hide(),v=n(o.elementFromPoint(d.mouse.x,d.mouse.y)).closest(e+g),i.show()),!r.length||!p&&r.is(u))i.slideTo(r);else{h=r.hasClass(Bt),p||(f=r.children(e+g),h||!f.length?u.css(V,this._minWidth+C):m?f.remove():f.slideTo(u)),b=i.offset(),m&&u.hasClass(Bt)?i=i.clone().addClass(Qt).removeClass(le).data(ee,i):m&&h&&(i.remove(),i=null),i&&(v.length?v.before(i):i.appendTo(r),i.offset(b),i.slideTo()),h||r.css(V,""),this.content.children().autoTextSize(this._autoSize);var l=[],c=[],y=this.$dragList;this.$dropList.each(function(t){var i=n(this).children(e+g);i.length&&(p?(l[t]="",c[t]=[],i.each(function(){l[t]+=(l[t].length?" ":"")+n(this).text(),c[t].push(y.index(this))})):(l[t]=i.text(),c[t]=y.index(i)))}),this[a]({progress:this.$dropList.length?Math.min(1,this.$dropList.children().length/this.$dropList.length):0,response:l,state:l.length?c:[]}),this.initList()}},i[He]=function(e,i,n){(this[t]([s,Pt],!1)||!i)&&e.slideTo(ee)},i[Re]=function(t){var i=this.content.find(e+I);return i.length&&t.hasClass(q)?this[Kt](i,t):t.hasClass(g)&&t.addClass(I),i.not(t).removeClass(I),!1},d.prototype[Fe]=function(t){return t},i[ft][l]=function(){var i,b,d,f=0,y=0,x=0,o=[],p=this[t]([s,Dt]),_=this[k]([gt],"");if(b=_.replace(/(<embed.*?\/>|\{[^\{]*?\})/gi,function(s,t){if("{"!==t[0])return t;t=t.replace(/(^{\s*|\s*})/g,""),this._values.push(t.length&&0!==t.indexOf("~")?t.replace(/(<[^>]*>|~.*$)/g,"").toLowerCase().split(/\s*\|\s*/):[]);var e=t.split(/\s*[~\|]\s*/);if(e.length&&!e[0]&&e.shift(),p)for(var n,i=0;e.length>i;i++)n=e[i].split(/\s+/),e[i]&&n.length&&o.push.apply(o,n);else o.push.apply(o,e);return"<"+m+c+Hn+z+'"'+q+c+Ne+(p?'" '+Ki+z+'"'+Ln+h+ai:"")+'"></'+m+">"}.bind(this)),p&&this.content.addClass(qn+v+Dt),this._values.length){var l=[];for(i=0;this._values.length>i;i++)this._values[i].length&&l.push(this._values[i].join("|"));this[a]({max:this._values.length,auto:!!l.length,answers:l}),l.length||(this.disableReveal=!0)}for(r(u,r(Be,P+h+$e+Zs+R+h+$e,r(Ns,r(mt,R+h+1+qt,this.$drags=r(u,Bt,q).appendTo(this.content),r(Yt))),r(Ws,r(mt,R+h+Lt,this.$text=r(u,si,this[t]([s,"keep_width"])?Xn:null,R+h+$e,z+b))))).appendTo(this.content),(this[t]([s,Pt])||this[t]([s,"dedup"]))&&o.unique(),this.$dragList=n(),i=0;o.length>i;i++)this.$dragList.push(r(m,g,Nt,z+o[i]).appendTo(this.$drags)[0]);for(this.$dropList=n(e+q+":not("+e+Bt+")",this.content),i=0;this.$dragList.length>i;i++)d=this.$dragList.eq(i),f=Math.max(f,d.outerWidth(!0)),y=Math.max(y,d.outerHeight());x=parseFloat(this.$drags.css(xt)),this._minWidth=f/x,this.$dropList.css(V,this._minWidth+C),this.$dragList.css(P,this._minWidth+C)},i[Tt][l]=function(l){var e=this[a](Vn)||[];if(e.length){var r=this[t]([s,Pt],!1),o=this.$dragList,i=function(e){var t=o.eq(e);r&&(t=t.clone().addClass(Qt).data(ee,t)),t.appendTo(n(this).css(V,""))};this.$dropList.each(function(t){if(n.isNumber(e[t]))i.call(this,e[t]);else if(n.isArray(e[t]))for(var s=0;e[t].length>s;s++)i.call(this,e[t][s])})}},i.checkReset[l]=function(){return!this.$dropList.children().length},i.checkSubmit[l]=function(){return!!this.$dropList.filter(":empty").length},i[vt][l]=function(){var i=this.$drags.children(e+g);this.$drags.append(this[t]([s,ds],!0)?i.shuffle():[].sort.call(i,function(t,e){return t=t.textContent.toLowerCase(),e=e.textContent.toLowerCase(),t>e?1:e>t?-1:0}))},i[M][l]=function(s){var t,e,i=0,n=0;for(t=0;this.$dragList.length>t;t++)e=this.$dragList.eq(t),i=Math.max(i,e.outerWidth(!0)),n=Math.max(n,e.outerHeight(!0));this.$drags.css(R,Math.ceil(this.$dragList.length/Math.floor(this.$drags.outerWidth()/i))*n+parseFloat(this.$drags.css(hn))+parseFloat(this.$drags.css(ln)))},i[Ot][l]=function(){n(e+Qt,this.content).remove(),this.$dropList.addClass(Ne).css(V,this._minWidth+C),this.$dragList.addClass(Nt).appendTo(this.$drags),this[vt]()},i[st][l]=function(){var e,a,i,r,h,o=this.$dragList.addClass(Nt),p=[],l=[],u=[],d=[],f=this[t]([s,Pt],!1),c={begin:function(){n(this).addClass(At)},complete:function(){n(this).closest(".abc-droppable").css(V,"")}};for(this.$dropList.removeClass(Ne),f?this.$dropList.empty():o.slideTo(this.$drags),o.addClass("abc-draggable-show"),e=0;o.length>e;e++)for(i=o.eq(e),p[e]=i,d[e]=i.outerWidth(),h=i.text().toLowerCase(),a=0;this._values.length>a;a++)if(!u[a]&&h===this._values[a][0]&&(u[a]=!0,r=this.$dropList.eq(a),r.is(":empty"))){l[e]=r.css(V,d[e]);break}for(o.removeClass("abc-draggable-show"),e=l.length-1;e>=0;e--)i=p[e],r=l[e],f?i.clone().addClass(Qt).prependTo(i).slideTo(r,c):i.slideTo(r,c)},i[at][l]=function(){var i=0,r=0,o=[],l=this._values,h=this[t]([s,Dt]);this.$dropList.each(function(s){var a=n(this),c=a.children(e+g),t=h?a.textSpace():a.text(),u=l[s]&&l[s].length,d=u&&l[s].indexOf(t.toLowerCase())>=0;d?(i++,c.addClass(lt)):u?(r++,t="(("+t+"))",c.addClass(it)):c.removeClass(Nt),o.push(t)}),d.loadState||(this[a]({score:i,progress:1,response:o}),d.api(E,this.baseId,i,i+r,o)!==!1&&this[Te](i,i+r))},i}),!function(e){"use strict";function _(t,i,n){"addEventListener"in e?t.addEventListener(i,n,!1):"attachEvent"in e&&t.attachEvent("on"+i,n)}function ot(t,i,n){"removeEventListener"in e?t.removeEventListener(i,n,!1):"detachEvent"in e&&t.detachEvent("on"+i,n)}function ut(t){return t.charAt(0).toUpperCase()+t.slice(1)}function vt(a){var e,i,s,t=null,n=0,r=function(){n=w(),t=null,s=a.apply(e,i),t||(e=i=null)};return function(){var o=w();n||(n=o);var l=g-(o-n);return e=this,i=arguments,0>=l||l>g?(t&&(clearTimeout(t),t=null),n=o,s=a.apply(e,i),t||(e=i=null)):t||(t=setTimeout(r,l)),s}}function t(t){}function d(t){}function yt(){_t(),t("Initialising iFrame ("+location.href+")"),wt(),At(),M("background",tt),M("padding",rt),Rt(),q(),lt(),pt(),ft(),et(),v=It(),u("init","Init message from host page"),P()}function _t(){function e(t){return"true"===t?!0:!1}var t=D.substr(J).split(":");$=t[0],R=void 0!==t[1]?+t[1]:R,b=void 0!==t[2]?e(t[2]):b,Y=void 0!==t[3]?e(t[3]):Y,c=void 0!==t[4]?+t[4]:c,r=void 0!==t[6]?e(t[6]):r,S=t[7],n=void 0!==t[8]?t[8]:n,tt=t[9],rt=t[10],O=void 0!==t[11]?+t[11]:O,v.enable=void 0!==t[12]?e(t[12]):!1,T=void 0!==t[13]?t[13]:T,s=void 0!==t[14]?t[14]:s}function wt(){function i(){var i=e.iFrameResizer;t("Reading data from page: "+JSON.stringify(i)),F="messageCallback"in i?i.messageCallback:F,P="readyCallback"in i?i.readyCallback:P,m="targetOrigin"in i?i.targetOrigin:m,n="heightCalculationMethod"in i?i.heightCalculationMethod:n,s="widthCalculationMethod"in i?i.widthCalculationMethod:s}"iFrameResizer"in e&&Object===e.iFrameResizer.constructor&&i(),t("TargetOrigin for parent set to: "+m)}function St(e,t){return-1!==t.indexOf("-")&&(d("Negative CSS value ignored for "+e),t=""),t}function M(i,e){void 0!==e&&""!==e&&"null"!==e&&(o.body.style[i]=e,t("Body "+i+' set to "'+e+'"'))}function At(){void 0===S&&(S=R+"px"),M("margin",St("margin",S))}function pt(){o.documentElement.style.height="",o.body.style.height="",t('HTML & body height set to "auto"')}function i(i){function n(){u(i.eventName,i.eventType)}var s={add:function(t){_(e,t,n)},remove:function(t){ot(e,t,n)}};i.eventNames&&Array.prototype.map?(i.eventName=i.eventNames[0],i.eventNames.map(s[i.method])):s[i.method](i.eventName),t(ut(i.method)+" event listener: "+i.eventType)}function dt(t){i({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),i({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),i({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),i({method:t,eventType:"Input",eventName:"input"}),i({method:t,eventType:"Mouse Up",eventName:"mouseup"}),i({method:t,eventType:"Mouse Down",eventName:"mousedown"}),i({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),i({method:t,eventType:"Touch Start",eventName:"touchstart"}),i({method:t,eventType:"Touch End",eventName:"touchend"}),i({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),i({method:t,eventType:"Print",eventName:["afterprint","beforeprint"]}),i({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),i({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),i({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===T&&i({method:t,eventType:"IFrame Resized",eventName:"resize"})}function K(e,i,s,n){return i!==e&&(e in s||(d(e+" is not a valid option for "+n+"CalculationMethod."),e=i),t(n+' calculation method set to "'+e+'"')),e}function q(){n=K(n,L,l,"height")}function lt(){s=K(s,at,h,"width")}function et(){!0===r?(dt("add"),mt()):t("Auto Resize disabled")}function $t(){t("Disable outgoing messages"),G=!1}function Lt(){t("Remove event listener: Message"),ot(e,"message",X)}function Ot(){null!==C&&C.disconnect()}function E(){dt("remove"),Ot(),clearInterval(j)}function kt(){$t(),Lt(),!0===r&&E()}function Rt(){var t=o.createElement("div");t.style.clear="both",t.style.display="block",o.body.appendChild(t)}function It(){function s(){return{x:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:o.documentElement.scrollTop}}function r(i){var t=i.getBoundingClientRect(),e=s();return{x:parseInt(t.left,10)+parseInt(e.x,10),y:parseInt(t.top,10)+parseInt(e.y,10)}}function i(i){function l(n){var i=r(n);t("Moving to in page link (#"+e+") at x: "+i.x+" y: "+i.y),a(i.y,i.x,"scrollToOffset")}var e=i.split("#")[1]||i,n=decodeURIComponent(e),s=o.getElementById(n)||o.getElementsByName(n)[0];void 0!==s?l(s):(t("In page link (#"+e+") not found in iFrame, so sending to parent"),a(0,0,"inPageLink","#"+e))}function n(){""!==location.hash&&"#"!==location.hash&&i(location.href)}function l(){function t(t){function e(t){t.preventDefault(),i(this.getAttribute("href"))}"#"!==t.getAttribute("href")&&_(t,"click",e)}Array.prototype.forEach.call(o.querySelectorAll('a[href^="#"]'),t)}function h(){_(e,"hashchange",n)}function c(){setTimeout(n,A)}function u(){Array.prototype.forEach&&o.querySelectorAll?(t("Setting up location.hash handlers"),l(),h(),c()):d("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return v.enable?u():t("In page linking not enabled"),{findTarget:i}}function ft(){t("Enable public methods"),Tt.parentIFrame={autoResize:function(t){return!0===t&&!1===r?(r=!0,et()):!1===t&&!0===r&&(r=!1,E()),r},close:function(){a(0,0,"close"),kt()},getId:function(){return $},getPageInfo:function(t){"function"==typeof t?(z=t,a(0,0,"pageInfo")):(z=t,a(0,0,"pageInfoStop"))},moveToAnchor:function(t){v.findTarget(t)},reset:function(){W("parentIFrame.reset")},scrollTo:function(t,e){a(e,t,"scrollTo")},scrollToOffset:function(t,e){a(e,t,"scrollToOffset")},sendMessage:function(t,e){a(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){n=t,q()},setWidthCalculationMethod:function(t){s=t,lt()},setTargetOrigin:function(e){t("Set targetOrigin: "+e),m=e},size:function(t,e){var i=""+(t?t:"")+(e?","+e:"");u("size","parentIFrame.size("+i+")",t,e)}}}function U(){0!==c&&(t("setInterval: "+c+"ms"),j=setInterval(function(){u("interval","setInterval: "+c)},Math.abs(c)))}function gt(){function p(e){function i(e){!1===e.complete&&(t("Attach listeners to "+e.src),e.addEventListener("load",r,!1),e.addEventListener("error",l,!1),n.push(e))}"attributes"===e.type&&"src"===e.attributeName?i(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),i)}function d(t){n.splice(n.indexOf(t),1)}function s(e){t("Remove listeners from "+e.src),e.removeEventListener("load",r,!1),e.removeEventListener("error",l,!1),d(e)}function a(t,e,i){s(t.target),u(e,i+": "+t.target.src,void 0,void 0)}function r(t){a(t,"imageLoad","Image loaded")}function l(t){a(t,"imageLoadFailed","Image load failed")}function h(t){u("mutationObserver","mutationObserver: "+t[0].target+" "+t[0].type),t.forEach(p)}function c(){var e=o.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return i=new f(h),t("Create body MutationObserver"),i.observe(e,n),i}var n=[],f=e.MutationObserver||e.WebKitMutationObserver,i=c();return{disconnect:function(){"disconnect"in i&&(t("Disconnect body MutationObserver"),i.disconnect(),n.forEach(s))}}}function mt(){var i=0>c;e.MutationObserver||e.WebKitMutationObserver?i?U():C=gt():(t("MutationObserver not supported in this browser!"),U())}function k(i,t){function n(e){var i=/^\d+(px)?$/i;if(i.test(e))return parseInt(e,Q);var n=t.style.left,s=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=n,t.runtimeStyle.left=s,e}var e=0;return t=t||o.body,"defaultView"in o&&"getComputedStyle"in o.defaultView?(e=o.defaultView.getComputedStyle(t,null),e=null!==e?e[i]:0):e=n(t.currentStyle[i]),parseInt(e,Q)}function bt(e){e>g/2&&(g=2*e,t("Event throttle increased to "+g+"ms"))}function I(r,n){for(var o=n.length,s=0,a=0,l=ut(r),e=w(),i=0;o>i;i++)s=n[i].getBoundingClientRect()[r]+k("margin"+l,n[i]),s>a&&(a=s);return e=w()-e,t("Parsed "+o+" HTML elements"),t("Element position calculated in "+e+"ms"),bt(e),a}function y(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function nt(i,t){function n(){return d("No tagged elements ("+t+") found on page"),f}var e=o.querySelectorAll("["+t+"]");return 0===e.length?n():I(i,e)}function st(){return o.querySelectorAll("body *")}function Ct(e,g,c,o){function u(){f=r,p=i,a(f,p,e)}function d(){function t(t,e){var i=Math.abs(t-e)<=O;return!i}return r=void 0!==c?c:l[n](),i=void 0!==o?o:h[s](),t(f,r)||b&&t(p,i)}function x(){return!(e in{init:1,interval:1,size:1})}function m(){return n in V||b&&s in V}function v(){t("No change in size detected")}function y(){x()&&m()?W(g):e in{interval:1}||v()}var r,i;d()||"init"===e?(ct(),u()):y()}function u(e,i,n,s){function a(){e in{reset:1,resetPage:1,init:1}||t("Trigger event: "+i)}function r(){return x&&e in xt}r()?t("Trigger event cancelled: "+e):(a(),Mt(e,i,n,s))}function ct(){x||(x=!0,t("Trigger event lock on")),clearTimeout(it),it=setTimeout(function(){x=!1,t("Trigger event lock off"),t("--")},A)}function N(t){f=l[n](),p=h[s](),a(f,p,t)}function W(e){var i=n;n=L,t("Reset trigger event: "+e),ct(),N("reset"),n=i}function a(n,s,a,i,e){function r(){void 0===e?e=m:t("Message targetOrigin: "+e)}function o(){var o=n+":"+s,r=$+":"+o+":"+a+(void 0!==i?":"+i:"");t("Sending message to host page ("+r+")"),Z.postMessage(H+r,e)}!0===G&&(r(),o())}function X(i){function h(){return H===(""+i.data).substr(0,J)}function l(){D=i.data,Z=i.source,yt(),ht=!1,setTimeout(function(){B=!1},A)}function c(){B?t("Page reset ignored by init"):(t("Page size reset by host page"),N("resetPage"))}function g(){u("resizeParent","Parent window requested size check")}function o(){var t=n();v.findTarget(t)}function s(){return i.data.split("]")[1].split(":")[0]}function n(){return i.data.substr(i.data.indexOf(":")+1)}function r(){return"iFrameResize"in e}function f(){var e=n();t("MessageCallback called from parent: "+e),F(JSON.parse(e)),t(" --")}function p(){var e=n();t("PageInfoFromParent called from parent: "+e),z(JSON.parse(e)),t(" --")}function a(){return i.data.split(":")[2]in{true:1,false:1}}function m(){switch(s()){case"reset":c();break;case"resize":g();break;case"moveToAnchor":o();break;case"message":f();break;case"pageInfo":p();break;default:r()||a()||d("Unexpected message ("+i.data+")")}}function b(){!1===ht?m():a()?l():t('Ignored message of type "'+s()+'". Received before initialization.')}h()&&b()}function Ft(){"loading"!==o.readyState&&e.parent.postMessage("[iFrameResizerChild]Ready","*")}var r=!0,Q=10,tt="",R=0,S="",C=null,rt="",b=!1,xt={resize:1,click:1},A=128,ht=!0,f=1,L="bodyOffset",n=L,B=!0,D="",v={},c=32,j=null,Y=!1,H="[iFrameSizer]",J=H.length,$="",V={max:1,min:1,bodyScroll:1,documentElementScroll:1},T="child",G=!0,Z=e.parent,m="*",O=0,x=!1,it=null,g=16,p=1,at="scroll",s=at,Tt=e,F=function(){d("MessageCallback function not defined")},P=function(){},z=function(){},w=Date.now||function(){return(new Date).getTime()},l={bodyOffset:function(){return o.body.offsetHeight+k("marginTop")+k("marginBottom")},offset:function(){return l.bodyOffset()},bodyScroll:function(){return o.body.scrollHeight},documentElementOffset:function(){return o.documentElement.offsetHeight},documentElementScroll:function(){return o.documentElement.scrollHeight},max:function(){return Math.max.apply(null,y(l))},min:function(){return Math.min.apply(null,y(l))},grow:function(){return l.max()},lowestElement:function(){return Math.max(l.bodyOffset(),I("bottom",st()))},taggedElement:function(){return nt("bottom","data-iframe-height")}},h={bodyScroll:function(){return o.body.scrollWidth},bodyOffset:function(){return o.body.offsetWidth},documentElementScroll:function(){return o.documentElement.scrollWidth},documentElementOffset:function(){return o.documentElement.offsetWidth},scroll:function(){return Math.max(h.bodyScroll(),h.documentElementScroll())},max:function(){return Math.max.apply(null,y(h))},min:function(){return Math.min.apply(null,y(h))},rightMostElement:function(){return I("right",st())},taggedElement:function(){return nt("right","data-iframe-width")}},Mt=vt(Ct);_(e,"message",X),Ft()}(n||{}),define("fill_the_gaps/fill_the_gaps",[Wt],function(e){var t=e[wi](vs);return t.defaultReset=!1,t[Rt]=function(){this.proto[Rt].call(this,ms),this[H](this[Rt])},t[ft]=function(){this.proto[ft].apply(this,arguments),this._values=[],this[H](this[ft]),this[vt](!0)},t[vt]=function(t){this[H](this[vt])},t[M]=function(t,e){this.content.children().autoTextSize(this._autoSize),this[H](this[M],t,e)},t[Tt]=function(t){return this[H](this[Tt],t)},t.checkReset=function(){this.proto.checkReset.call(this,this[H](this.checkReset))},t.checkSubmit=function(){this.proto.checkSubmit.call(this,this[H](this.checkSubmit))},t[Ot]=function(){this[H](this[Ot]),this.content.children().autoTextSize(this._autoSize)},t[st]=function(){this.proto[st].call(this),this[H](this[st])},t[at]=function(){this.proto[at].call(this),this[H](this[at])},t}),define("_draggable",[Mt,xe,Wt],function(i,r,a){function m(t){if(t.data){var e,i,n=t.data.rects,s=t.pageX,a=t.pageY;for(e=0;n.length>e;e++)if(i=n[e],s>=i.left&&i.right>=s&&a>=i.top&&i.bottom>=a)return t.data.drops[e]}return null}function h(n){var u,t=n.data,s=t.drag,c=t.helper,r=t.handler,b=function(e){e!==t.lastdrop&&(t.lastdrop&&i(t.lastdrop).removeClass(Qi),e&&i(e).addClass(Qi)[0],t.lastdrop=e)};if(!(n.which>1||n.isDefaultPrevented()||a._readonly))switch((n.type===ht||n.type===Z)&&(n.pageX=n.changedTouches[0].pageX,
n.pageY=n.changedTouches[0].pageY),n.type){case ht:case K:if(s=i(this),lastdrop=null,r=s.closest(e+f).data(Ge),r._disabled)return;var y=s.offset(),x=s.css(Ui)===tn?{top:0,left:0}:s.position();return i(o).on(s.hasClass(q)?p:w,{handler:r,drag:s,lastdrop:null,pageY:n.pageY,pageX:n.pageX,top:n.pageY-y.top,left:n.pageX-y.left,offsetY:x.top-(parseInt(s.css(It))||0),offsetX:x.left-(parseInt(s.css($))||0)},h),!1;case Z:case tt:if(s&&(t.moved||Math.abs(t.pageY-n.pageY)>10||Math.abs(t.pageX-n.pageX)>10)){if(t.moved=!0,a._dragging=!0,!c){if(r[ae]!==i.noop&&!r[ae](s))return i(o).off(e+g),!1;var d,_=r.content.find(e+q);for(t.drops=[],t.rects=[],u=0;_.length>u;u++)d=_.eq(u),(r[Ae]===i.noop||r[Ae](s,d))&&(t.drops.push(d),t.rects.push(d.getRect()));c=t.helper=r[Fe](s)||s,c.addClass(le),t.parentRect=c.offsetParent().getRect(),t.containerRect=(r._dragContainer||r.content).getRect()}i.rAF(g,function(){if(c.hasClass(le)){var h,u,d=t.parentRect,e=t.containerRect,i=c.getRect(),a=c.data(g+v+It),o=c.data(g+v+$);a=a===l?t.top:parseFloat(a),o=o===l?t.left:parseFloat(o),h={top:Math.range(e.top,n.pageY-a,e.bottom-i.bottom+i.top)-d.top-t.offsetY,left:Math.range(e.left,n.pageX-o,e.right-i.right+i.left)-d.left-t.offsetX},u={top:n.pageY-t.pageY,left:n.pageX-t.pageX},r[Ri](c,h,u,s)!==!1&&(c.css(h),t.drop=m(n,c),t.drop?(b(t.drop[0]),r[Mi](c,t.drop)):b(null))}})}return!1;case _t:case bt:return i(o).off(e+g),t.moved?(t.drop&&(r[Kt](s,t.drop),b(null)),r[He](s,!!t.drop,c.removeClass(le)),a._dragging=!1):r[Re](s),!1}}var n=a.prototype,b=a[Xt],x=n[M],p=bt+e+g+c+_t+e+g,_=tt+e+g+c+Z+e+g,w=_+c+p;a[Xt]=function(){a.$activities.on(ht+c+K,e+g+y+e+q+"",{},h),b.apply(this,arguments)},n[M]=function(){x.apply(this,arguments);var t;this.content.find(e+g+e+ce).each(function(o,r){var n,s,e=i(r),a=e.children();t=parseFloat(e.css(xt)),Modernizr.csscalc||e.children(F).height(e.height()/t-.4+C),n=a.first(),n.is(F)&&e.css(an,n.width()/t+.4+C),s=a.last(),s.is(F)&&e.css(as,s.width()/t+.4+C)})},n[bi]=function(t,n){var e=r(u,q);return i.isNumber(t)&&(n&&e.addClass($i).css("background-image","url('"+this[d]("drop_"+(t+1))+"')"),e.data("id",t)),e},n[Ts]=function(e,i,a,c){var n=(c?_s:Ht)+"_",o=this[t]([s,Ht,li],!1),l=this[t]([s,Ht,ci],!1),h=this[bi](),f=r(u,g,o||l?ce:null,a?$i:null,a?rt+":url('"+this[d](n+(e+1))+"')":null,o?r(F,"src="+this[d](n+$+(this[t]([s,Ht,ns])?"_"+(e+1):""))):null,i?r(Be,r(mt,si,"="+i,"display:table-cell",i.indexOf("<img")>=0?"height:100%":null)):null,l?r(F,"src="+this[d](n+X+(this[t]([s,Ht,is])?"_"+(e+1):""))):null).data({id:e,parent:h});return h.append(f)};return n[ae]=i.noop,n[Fe]=i.noop,n[Ri]=i.noop,n[Ae]=i.noop,n[Mi]=i.noop,n[Kt]=i.noop,n[He]=i.noop,n[Re]=i.noop,a}),require(["velocity-ui","velocity","modernizr","jquery","api","common","_const","activity","fill_the_gaps/fill_the_gaps.dragdrop","iframeResizer","fill_the_gaps/fill_the_gaps","_draggable"])}(document,window);